(function(){function x(t){return e(this,t,1),this.lazyRender||this.render(),this}function T(t){return e(this,t,1),this.lazyRender||this.render(),this}function N(t){return e(this,t,1),this.lazyRender||this.render(),this}var e=QW.ObjectH.mix,t=QW.ArrayH.remove,n=QW.StringH.format,r=QW.Browser.ie6,i=QW.DomU,s=i.createElement,o=i.getDocRect,u=QW.NodeH,a=QW.EventTargetH.addEventListener,f=QW.EventTargetH.removeEventListener,l=u.fire,c=u.hide,h=u.setStyle,p=u.getXY,d=function(e,t,n,r,s){var o=i.getDocRect();r==null&&(r=(o.width-t)/2+o.scrollX),r=Math.max(Math.min(r,o.scrollX+o.width-t),o.scrollX),s==null&&(s=(o.height-n)/2+o.scrollY),s=Math.max(Math.min(s,o.scrollY+o.height-n),o.scrollY),u.setXY(e,r,s)},v=u.contains,m=u.removeNode,g=QW.EventH,y=g.getTarget,b=g.getKeyCode,w=g.preventDefault,E=QW.CustEvent,S={VERSION:"0.0.1"};(function(){function v(){var e=s("div",{className:"mask",tabIndex:-1,unselectable:"on"});return document.body.insertBefore(e,document.body.firstChild),e}function g(){var e=u.offsetParent,t=document.documentElement,n=u.style;if(parseInt(n.top)!=e.scrollTop||parseInt(n.left)!=e.scrollLeft)n.top=e.scrollTop,n.left=e.scrollLeft;t.clientHeight!=u.offsetHeight&&(n.height=t.clientHeight),t.clientWidth!=u.offsetWidth&&(n.width=t.clientWidth)}function y(e){e.keyEsc&&(f(document,"keydown",S.keydownHdl),a(document,"keydown",S.keydownHdl))}var n=100,i=[],u,l=0;e(S,{showPanel:function(e,s,a,f,c,m){e._rendered&&e.render(),t(i,e),i.push(e);var b=e.oWrap.style;e.isVisible?b.zIndex!=n&&(b.zIndex=n+=2):b.zIndex=n+=2,e.withMask&&(u=u||v(),h(u,{zIndex:n-1,display:"block"}),r&&(g(u),clearInterval(l),l=setInterval(g,1e3))),f!=null&&(b.width=f+"px"),c!=null&&(b.height=c+"px");if(e.posCenter){var w=S.getWrapSize(e);d(e.oWrap,w[0],w[1],s,a)}else{s=s||0,a=a||0;if(m){var E=p(m);s+=E[0],a+=E[1]}if(e.posAdjust){var w=S.getWrapSize(e),x=o();s=Math.min(s,x.scrollX+x.width-w[0]),s=Math.max(s,x.scrollX),a=Math.min(a,x.scrollY+x.height-w[1]),a=Math.max(a,x.scrollY)}b.left=s+"px",b.top=a+"px"}if((e.posAdjust||e.posCenter)&&i.length>1){var T=i[i.length-2].oWrap.style;T.top==b.top&&T.left==b.left&&(b.top=parseInt(b.top)+10+"px",b.left=parseInt(b.left)+10+"px")}b.display="block",e.isVisible=!0,y(e)},hidePanel:function(e){c(e.oWrap),e.isVisible=!1,t(i,e);var n=!1;for(var r=i.length-1;r>-1;r--){var s=i[r];if(s.withMask){n=!0,u.style.zIndex=s.oWrap.style.zIndex-1;break}}!n&&u&&(c(u),clearInterval(l))},disposePanel:function(e){m(e.oWrap);for(var t in e)e[t]=null},risePanel:function(e){if(!e.isVisible)throw alert("\u7a0b\u5e8f\u9519\u8bef."),"\u9519\u8bef\uff1a\u8fd8\u6ca1\u6709\u6253\u5f00panel\u5462.";var r=e.oWrap.style;if(r.zIndex!=n){r.zIndex=n+=2,t(i,e),i.push(e);if(e.withMask){var s=u.style;s.zIndex=n-1}}},keydownHdl:function(e){if(i.length&&b(e)==27){var t=i[i.length-1];t.keyEsc&&(t.hide(),w(e))}i.length||f(document,"keydown",S.keydownHdl)},getWrapSize:function(e,t,n){var r=e.oWrap,i=r.style,s=[i.display,i.width,i.height];i.display="block",t&&(i.width=t),n&&(i.height=n);var o=[r.offsetWidth,r.offsetHeight];return i.display=s[0],s[1]&&(i.width=s[1]),s[2]&&(i.height=s[2]),o},bgIframeSrc:"about:blank"})})(),function(){function e(e,t){t=t||"",t.tagName?(e.innerHTML="",e.appendChild(t)):e.innerHTML=t}x.EVENTS=["beforeshow","aftershow","beforehide","afterhide"],x._elHtml={content:'<div class="panel-content" remark="oContent"><div class="hd"></div><div class="bd"></div><div class="ft"></div></div>',closeHdl:'<span class="close"></span>',resizeHdl:'<span class="resize"><span></span></span>',corner1:'<span class="co1"><span></span></span>',corner2:'<span class="co2"><span></span></span>',cue:'<span class="cue"></span>',shadow:'<span class="sd"></span>',bgIframe:'<iframe class="panel-iframe" src="'+S.bgIframeSrc+'" FRAMEBORDER=0 height="100%"></iframe>'},x.prototype={defaultClassName:"panel",wrapId:"",className:"",title:"",header:"",body:"Panel Body",footer:"",withCorner:0,withCue:0,withShadow:0,withClose:0,withBgIframe:r,withMask:0,dragable:0,resizable:0,keyEsc:0,posCenter:0,posAdjust:0,isVisible:!1,oWrap:null,oContent:null,oHeader:null,oBody:null,oFooter:null,oCloseHdl:null,oResizeHdl:null,oShadow:null,oCue:null,oCorner1:null,oCorner2:null,oBgIframe:null,render:function(){var t=this;if(t._rendered)return;var n=s("div",{className:t.defaultClassName+" "+(t.className||"")});n.style.display="none",t.oWrap=n,t.wrapId&&(n.id=t.wrapId),c(n);var i=x._elHtml,o=[i.content,t.withClose?i.closeHdl:"",t.resizable?i.resizeHdl:"",t.withCorner?i.corner1+i.corner2:"",t.withCue?i.cue:"",t.withShadow?i.shadow:"",t.withBgIframe&&r?i.bgIframe:""];n.innerHTML=o.join("");var u=n.childNodes;t.oContent=u[0];var f=1;t.withClose&&(t.oCloseHdl=u[f++]),t.resizable&&(t.oResizeHdl=u[f++]),t.withCorner&&(t.oCorner1=u[f++],t.oCorner2=u[f++]),t.withCue&&(t.oCue=u[f++]),t.withShadow&&(t.oShadow=u[f++]),t.withBgIframe&&r&&(t.oBgIframe=u[f++]);var u=t.oContent.childNodes;t.oHeader=u[0],t.oBody=u[1],t.oFooter=u[2],t.isVisible=!1;var l=t.title&&"<h3>"+t.title+"</h3>"||t.header;l&&e(t.oHeader,l),t.body&&e(t.oBody,t.body),t.footer&&e(t.oFooter,t.footer),t.withClose&&a(t.oCloseHdl,"click",function(){t.hide()}),t.dragable&&t.initDrag(),t.resizable&&t.initResize(),document.body.insertBefore(n,document.body.firstChild),E.createEvents(t,x.EVENTS),t._rendered=!0},show:function(e,t,n,r,i){return this._rendered&&this.render(),this.fire("beforeshow")==0?!1:(S.showPanel(this,e,t,n,r,i),this.fire("aftershow"),!0)},hide:function(){return this.fire("beforehide")==0?!1:(S.hidePanel(this),this.fire("afterhide"),!0)},dispose:function(){if(this.isVisible)return!1;S.disposePanel(this)},rise:function(){S.risePanel(this)},initDrag:function(){var e=this,t=new QW.SimpleDrag({oSrc:this.oWrap,oHdl:this.oHeader,minXAttr:1,minYAttr:1,withProxy:!0});t.on("dragstart",function(){e.rise()})},initResize:function(){var e=this,t=new QW.SimpleResize({oSrc:this.oWrap,oHdl:this.oResizeHdl,minXAttr:0,yFixed:!0,withProxy:!0});t.on("dragstart",function(){e.rise()})}}}(),function(){T.MENTOR_CLASS=x,T.prototype={posAdjust:1,defaultClassName:"panel panel-popup",relatedEls:null,_refreshBlurHdl:function(e){this._fnBlur&&(f(document,"keydown",this._fnBlur),f(document,"keyup",this._fnBlur),f(document,"mousedown",this._fnBlur),e&&(a(document,"keydown",this._fnBlur),a(document,"keyup",this._fnBlur),a(document,"mousedown",this._fnBlur)))},show:function(e,t,n,r,i){var s=this;return s._rendered&&s.render(),s._fnBlur=s._fnBlur||function(e){var t=y(e)||document.body;if(!s.oWrap)return;var n=s.relatedEls||[];n.push(s.oWrap);for(var r=0;r<n.length;r++){var i=n[r];if(i==t||v(i,t))return}s.hide()},s.fire("beforeshow")==0?!1:(S.showPanel(s,e,t,n,r,i),s._refreshBlurHdl(!0),s.fire("aftershow"),!0)},hide:function(){return this.fire("beforehide")==0?!1:(S.hidePanel(this),this._refreshBlurHdl(!1),this.fire("afterhide"),!0)}},e(T.prototype,x.prototype)}(),function(){N.MENTOR_CLASS=x,N.prototype={defaultClassName:"panel panel-dialog",withMask:1,withClose:1,dragable:!!QW.SimpleDrag},e(N.prototype,x.prototype)}();var C=function(){var t={alert:'<div class="panel-dialog-sys panel-alert cls"><div class="msg">{0}</div><div class="btn-ctn"><span class="btn btn-2"><button>\u786e\u5b9a</button></span></div></div>',confirm:'<div class="panel-dialog-sys panel-confirm cls"><div class="msg">{0}</div><div class="btn-ctn"><button class="cancel-btn" style="margin-right:15px;"><span class="btn btn-2"><button>\u786e\u5b9a</button></span><span class="btn btn-2"><button>\u786e\u5b9a</button></span></div></div>',prompt:'<div class="panel-dialog-sys panel-prompt cls"><div class="msg">{0}</div><div class="ipt-ctn"><input type="text-input"></div><div class="btn-ctn"><button>\u786e\u5b9a</button><button>\u53d6\u6d88</button></div></div>',msgbox:'<div class="panel-dialog-sys panel-msgbox cls"><div class="msg">{0}</div><div class="btn-ctn"><button>\u662f(Yes)</button><button>\u5426(No)</button><button>\u53d6\u6d88</button></div></div>'},r={getSysDialog:function(r,i,s,o){o=o||{},e(o,{posCenter:1,keyEsc:1,title:"\u95ee\u7b54\u63d0\u793a",dragable:!!QW.SimpleDrag,body:n(t[r]||"error",i)});var u=new N(o),f=u.oWrap.getElementsByTagName("button");u.dialogButtons=f;switch(r){case"alert":a(f[0],"click",function(e){u.hide()});break;case"confirm":a(f[0],"click",function(e){u.returnValue=!0,u.hide()}),a(f[1],"click",function(e){u.hide()}),u.returnValue=!1;break;case"prompt":var c=u.oWrap.getElementsByTagName("input")[0];u.dialogInput=c,a(c,"keydown",function(e){b(e)==g.KEY_ENTER&&setTimeout(function(){l(f[0],"click")},10)}),a(f[0],"click",function(e){u.returnValue=c.value,u.hide()}),a(f[1],"click",function(e){u.hide()});break;case"msgbox":a(f[0],"click",function(e){u.returnValue=!0,u.hide()}),a(f[1],"click",function(e){u.returnValue=!1,u.hide()}),a(f[2],"click",function(e){u.hide()})}return u.on("aftershow",function(){var e=c||f[0];try{e.focus(),e.select()}catch(t){}}),u.on("afterhide",function(){try{s&&s(this.returnValue)}finally{}}),u},_sysDialog:function(e,t,n,r,i){i=i||{};var s=QW.Panel.getSysDialog(e,t,r,i);e=="prompt"&&(s.dialogInput.value=n||""),s.show(null,null,i.width||300,i.height)},alert:function(e,t,n){QW.Panel._sysDialog("alert",e,null,t,n)},confirm:function(e,t,n){QW.Panel._sysDialog("confirm",e,null,t,n)},prompt:function(e,t,n,r){QW.Panel._sysDialog("prompt",e,t,n,r)},msgbox:function(e,t,n){QW.Panel._sysDialog("msgbox",e,null,t,n)}};return r}();QW.provide({PanelManager:S,BasePanel:x,LayerPopup:T,LayerDialog:N,Panel:C})})();(function(){var e={wrapId:"BasePanel01",footer:"",withClose:!0,withCorner:!1,withCue:!1,withShadow:!1,withBgIframe:!1,keyEsc:!0,withMask:!0,dragable:!1,resizable:!1,posCenter:!0,posAdjust:!1},t={alert:function(e,t,n,r,i){return t='<div class="'+e+'"><i></i><span>'+t+"</span></div><p>"+(n||"")+"</p>",QW.Panel.alert(t,i,{width:430,title:r||"\u5947\u864e\u95ee\u7b54\u63d0\u793a"})},confirm:function(e,t,n,r){var t=t||"\u5947\u864e\u95ee\u7b54\u63d0\u793a",i=QW.Panel.confirm(e,n,{width:430,title:t});return noFun&&Object.isFunction(noFun)&&i.on("afterhide",r),i},select:function(t,n,r,i){t=t||"\u4e3a\u60a8\u7684\u95ee\u9898\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u5206\u7c7b\uff1a";var s={className:"panel-01",body:"<strong>"+t+'</strong><div id="category-pannel"></div>',header:"<h3>\u8bf7\u9009\u62e9\u5206\u7c7b</h3>",footer:'<div class="confirm-btn"><span class="btn btn-2"><button>\u786e\u5b9a</button></span></div><div class="clear"></div>'},o=Object.mix(s,e),u=new QW.BasePanel(o),a;return u.show(null,null,482,null,null),Ajax.get("/category/getallcates/",function(e){var t=e.evalExp();a=new categoryPannel("category-pannel",t),a.setDefaultBread(["1"]),n&&Object.isArray(n)&&a.setDefaultBread(n),W(u.oWrap).query(".confirm-btn").click(function(){r&&Object.isFunction(r)&&(r(a),u.hide())})}),i&&Object.isFunction(i)&&u.on("afterhide",nofun),u}};window.panelBox=t})();var updateUserInfo=function(e){var t=W("#user_info"),n=[];if(e&&e.qid){var r=e.userName;n.push('<a href="/user/">'+r+"</a>&nbsp;"),n.push("<span>|</span>&nbsp;"),n.push('<a class="setting" href="/user/"></a>&nbsp;'),n.push("<span>|</span>&nbsp;"),n.push('<a href="#" class="user-logout">\u9000\u51fa</a>')}else n.push('<a href="#" class="user-login">\u767b\u5f55</a>&nbsp;'),n.push("<span>|</span>&nbsp;"),n.push('<a href="#" class="user-reg">\u6ce8\u518c</a>');t.html(n.join(""))};(function(){typeof QHPass!="undefined"&&(QHPass.resConfig.regSrc="qihoo_shequ",QHPass.resConfig.loginStatus=!1,QHPass.resConfig.cookie_domains=["qihoo"],QHPass.resConfig.reloadAfterLogout=!1,QHPass.resConfig.regPhoneOpts.needName=!0,QHPass.resConfig.regOpts.onlyName=!0,QHPass.resConfig.postCharset="utf-8",QHPass.resConfig.regPhoneOpts.height=430,QHPass.resConfig.namedOpts.afterRender=function(){var e=W("#mod_quc_pop");e.query(".username-title-tips").html("\u8bf7\u60a8\u5148\u8bbe\u7f6e\u7528\u6237\u540d"),e.query(".setuname-tips").html("\u5728\u5947\u864e\u95ee\u7b54\u63d0\u95ee\u6216\u56de\u7b54\u95ee\u9898\u65f6\u5fc5\u987b\u8981\u6709\u7528\u6237\u540d\uff0c\u4ee5\u4fbf\u8ba9\u60a8\u7684\u53d1\u8868\u66f4\u5bb9\u6613\u5f97\u5230\u5176\u4ed6\u7528\u6237\u7684\u5173\u6ce8\uff01"),e.query(".suggest-username").appendChild(W('<span class="setuname-rule">\u63d0\u793a\uff1a\u7528\u6237\u540d7\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u4e0d\u80fd\u5168\u4e3a\u6570\u5b57</span>'))},QHPass.resConfig.bindOpts.afterRender=function(){var e=W("#mod_quc_pop");e.query(".username-title-tips").html("\u60a8\u6b63\u5728\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e10\u53f7\u8bbf\u95ee\u5947\u864e\u95ee\u7b54<br>\u7ee7\u7eed\u63d0\u95ee\u6216\u56de\u7b54\u9700\u8981\u5148\u8bbe\u7f6e360\u7528\u6237\u540d\u548c\u5bc6\u7801"),e.query(".setuname-tips").html("\u5728\u5947\u864e\u95ee\u7b54\u63d0\u95ee\u6216\u56de\u7b54\u95ee\u9898\u65f6\u5fc5\u987b\u8981\u6709\u7528\u6237\u540d\uff0c\u4ee5\u4fbf\u8ba9\u60a8\u7684\u53d1\u8868\u66f4\u5bb9\u6613\u5f97\u5230\u5176\u4ed6\u7528\u6237\u7684\u5173\u6ce8\uff01")},W(document.body).delegate(".user-login","click",function(e){e.preventDefault(),QHPass.sso(!0)}).delegate(".user-reg","click",function(e){e.preventDefault(),QHPass.reg(!0)}).delegate(".user-logout","click",function(e){e.preventDefault(),QHPass.logout(function(){location.href.indexOf("/user")>-1?location.href="/":location.reload()})})),W("#topbar").delegate(".setting","mouseenter",function(e){W(".panel-setting").show()}),W(".panel-setting").on("mouseleave",function(e){W(this).hide()}),W("#tipReward").length&&setTimeout(function(){Browser.ie?W("#tipReward").show():W("#tipReward").fadeIn()},250)})(),function(){var e=null,t=150;W("#navStore").on("mouseenter",function(n){var r=W(this),i=r.getRect();e=setTimeout(function(){W("#panelStore").css({left:i.left+"px",top:i.bottom+"px"}).show()},t)}).on("mouseleave",function(n){e&&clearTimeout(e),e=setTimeout(function(){W("#panelStore").hide()},t)}),W("#panelStore").on("mouseenter",function(t){e&&clearTimeout(e)}).on("mouseleave",function(n){e&&clearTimeout(e),e=setTimeout(function(){W("#panelStore").hide()},t)}),Browser.ie6&&W("div.main-nav").delegate("li","mouseenter",function(){var e=W(this);if(e.hasClass("on"))return;e.addClass("hover")}).delegate("li","mouseleave",function(){var e=W(this);if(e.hasClass("on"))return;e.removeClass("hover")})}(),function(){var e={web:"http://www.360sou.com/s?ie=utf-8&q={0}",news:"http://news.360sou.com/ns?ie=utf-8&q={0}",pic:"http://image.jike.com/so?ie=utf-8&fm=sesop1&q={0}",video:"http://video.360sou.com/v?ie=utf-8&q={0}",zhidao:"id=evinm_wenda:search&sk={0}"};W("#tabS .tabS-channel, #topbar .nav").delegate("a","click",function(t){var n=W(this),r=n.attr("data-t"),i=W("#search_kw").val().trim(),s=e[r];s&&(t.preventDefault(),i==""&&r=="zhidao"?location.href="/":location.href=s.format(encodeURIComponent(i)))}),W("#btn_search_ask").on("click",function(e){var t=W("#search_kw").val().trim();t==""&&(e.preventDefault(),setTimeout(function(){W("#search_kw").focus().shine4Error()},10))}),W("#btn_add_ask").on("click",function(e){e.preventDefault();var t=W("#search_kw").val().trim();location.href="/index/ask/?q={0}".format(encodeURIComponent(t))});var t=null;W("#btn_answer_ask").on("click",function(e){e.preventDefault();var t=W("#search_kw").val().trim();location.href="/c/0/?filt=0&q={0}".format(encodeURIComponent(t))});try{var n=W("#search_kw");if(n.val().trim()==""){var r=(location.href.queryUrl("q")||"").stripTags();r&&n.val(r)}n.focus()}catch(i){}}();