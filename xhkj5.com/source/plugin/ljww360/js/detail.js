function getListener(e,t,n){var r;return t=t.toLowerCase(),(r=e.__allListeners||n&&(e.__allListeners={}))&&(r[t]||n&&(r[t]=[]))}function getDomNode(e,t,n,r,i,s){var o=r&&e[t],u;!o&&(o=e[n]);while(!o&&(u=(u||e).parentNode)){if(u.tagName=="BODY"||s&&!s(u))return null;o=u[n]}return o&&i&&!i(o)?getDomNode(o,t,n,!1,i):o}(function(){var e=document,t=ObjectH.mix,n=window.screen,r,i,s=!1,o=function(e){var t=[];for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")},u=function(e){return Object.prototype.toString.call(e)=="[object Function]"},a={url:e.location.href,title:e.title,content:"",pic:""},f={},l={},c={tsina:{queryString:{},setting:["tsina",{},"http://v.t.sina.com.cn/share/share.php",620,450,"",!0],transformParam:{content:"title"}},renren:{queryString:{r:1},setting:["renren",{},"http://share.renren.com/share/buttonshare.do",626,346],transformParam:{url:"link"}},douban:{queryString:{r:1,v:1},setting:["douban",{},"http://www.douban.com/recommend/",450,330],transformParam:{content:"comment",pic:""}},tqq:{queryString:{},setting:["tqq",{},"http://v.t.qq.com/share/share.php",700,680,"",!0],transformParam:{content:"title"}},kaixin001:{queryString:{site:e.location.href,r:1},setting:["kaixin001",{},"http://www.kaixin001.com/repaste/bshare.php",570,420],transformParam:{content:"rcontent",url:"rurl",title:"rtitle",pic:""}},itieba:{queryString:{},setting:["itieba",{},"http://tieba.baidu.com/i/app/open_share_api",626,436],transformParam:{url:"link",pic:"",title:"",content:""}},hi:{queryString:{},setting:["hi",{},"http://apps.hi.baidu.com/share/",820,550],transformParam:{pic:""}},t163:{queryString:{},setting:["t163",{},"http://t.163.com/article/user/checkLogin.do",550,330,"",!0],transformParam:{url:"link",title:"source",content:"info"}},tsohu:{queryString:{},setting:["tsohu",{},"http://t.sohu.com/third/post.jsp",660,470,"",!0],transformParam:{content:"title"},needEncode:{content:"utf-8"}},taojianghu:{queryString:{tracelog:"\u6709\u554a"},setting:["taojianghu",{},"http://share.jianghu.taobao.com/share/addShare.htm",550,400],transformParam:{pic:""}},baishehui:{queryString:{from:"\u6709\u554a"},setting:["baishehui",{},"http://bai.sohu.com/share/blank/addbutton.do",480,340],transformParam:{url:"link",pic:""}},qzone:{queryString:{},setting:["qzone",{},"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",900,760]},qfriend:{queryString:{},setting:["qfriend",{},"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou",900,760,!0]}};ShareSite={gParam:function(e){if(!e)return a;t(a,e,!0)},gGroupParam:function(e,t){typeof e=="string"&&(e=(e||"").split(" "),e.forEach(function(e){f[e]=t}))},pClassParam:function(e,n){if(!n)return c[e];e=(e||"").split(" "),e.forEach(function(e){t(c[e].queryString,n,!0)})},pParam:function(e,t){typeof e=="string"&&(e=(e||"").split(" "),e.forEach(function(e){l[e]=t}))},pClassSetup:function(e,t){c[e][setting]=t},getPriateSet:function(){return c},isOpenWindow:function(e){s=e},publicHandle:function(e,r,i,h,p,d,v){var m={},g=this.id,y=i,b=c[e]||{},w=b.transformParam,E=b.needEncode,S=t({},b.queryString||{}),x=W(this).parentNode(".share-container").getAttr("id")||"",T=f[x];if(s||v)var N=(n.width-h)/2,C=(n.height-p)/2,d=d||"width="+h+", height="+p+", top="+C+", left="+N+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=yes, status=no";S=t({},[a,S],!0),T&&(S=t(S,T,!0)),m=t(S,r,!0),g&&(m=t(m,l[g]||{},!0)),/^[^:]*?\./i.test(m.url)&&(m.url="http://"+m.url);if(w)for(var k in w){var L=m[k],A=w[k];if(u(A))return A(m);L&&(A&&(m[A]=L),delete m[k])}if(E)for(var k in E)m[k]=E[k];i+=(/\?/.test(i)?"&":"?")+o(m);if(!v&&!s||!window.open(i,"",d))this.target="_blank",this.href=i}},Dom.ready(function(){W(".share-container").on("click",function(e){var t=e.target,n=t.className;for(var r in c)if(n.indexOf("shareto-button-"+r)>-1){var i=c[r];ShareSite.publicHandle.apply(t,i.setting),e.stopPropagation()}})})})(),function(){function e(e,t){var n=this;n.host=e,h.call(n,t),this.items=a(e,this.tabSelector)||[],this.views=this.views||this.viewSelector&&a(e,this.viewSelector)||[];var r=-1,i=this.items;for(var f=0;f<i.length;f++)if(s(i[f],this.selectedClass)){r=f;break}r>-1&&this.switchTo(r);if(n.autoPlay){var p=0;function d(){clearInterval(p),p=setInterval(function(){e.offsetWidth&&!n.autoPlayPausing&&n.next()},n.autoPlayTime||5e3)}d(),c(e,"mouseenter",function(){clearInterval(p)}),c(e,"mouseleave",d)}this.pageUpSelector&&l(e,this.pageUpSelector,"click",function(e){n.previous(),e.preventDefault()}),this.pageDownSelector&&l(e,this.pageDownSelector,"click",function(e){n.next(),e.preventDefault()});if(this.tabSelector){if(n.supportMouseenter){var v=0;l(e,n.tabSelector,"mouseenter",function(e){var t=this;o(t,n.preselectedClass),n.mouseenterSwitchTime!=null&&(clearTimeout(v),v=setTimeout(function(){n.switchToItem(t)},n.mouseenterSwitchTime|0)),e.preventDefault()}),l(e,n.tabSelector,"mouseleave",function(e){u(this,n.preselectedClass),clearTimeout(v),e.preventDefault()})}var m=this.switchEvents||this.defaultSwitchEvents;l(e,n.tabSelector,String(m),function(e){n.switchToItem(this),e.preventDefault()})}}var t=QW.ArrayH.indexOf,n=QW.ObjectH.mix,r=QW.CustEvent,i=QW.NodeH,s=i.hasClass,o=i.addClass,u=i.removeClass,a=i.query,f=QW.EventTargetH,l=f.delegate,c=f.on,h=function(e){n(this,e||{},!0),this.items=this.items||[],r.createEvents(this,h.EVENTS)};h.EVENTS=["beforeswitch","afterswitch"],n(h.prototype,{selectedIndex:-1,isSwitching:!1,switchTo:function(e){alert("Switch to: "+e)},switchToItem:function(e){var n=t(this.items,e);return this.switchTo(n)},next:function(){var e=(this.selectedIndex+1)%this.items.length;this.switchTo(e)},previous:function(){var e=this.selectedIndex-1;e<0&&(e=this.items.length-1),this.switchTo(e)}}),n(e.prototype,[{tabSelector:".slide-nav li",viewSelector:".slide-content li",pageDownSelector:".slide-pagedown",pageUpSelector:".slide-pageup",selectedClass:"selected",preselectedClass:"preselected",selectedViewClass:"selected",defaultSwitchEvents:["click"],switchTo:function(e){var t=this.selectedIndex,n={fromIndex:t,toIndex:e,fromItem:this.items[t],toItem:this.items[e],fromView:this.views[t],toView:this.views[e]};if(e==t)return;if(!this.fire("beforeswitch",n))return;this.isSwitching=!0,this.selectedIndex=e,this.switchAnim(n)},switchAnim:function(e){function t(){n.switchDone(e)}var n=this;e.fromItem&&u(e.fromItem,this.selectedClass),e.toItem&&o(e.toItem,this.selectedClass);switch(this.animType){case"fade":return e.fromView&&QW.NodeW(e.fromView).animate({opacity:{from:1,to:0}},this.animDur||500,function(){QW.NodeW(e.fromView).removeClass(n.selectedViewClass)},this.animEasing),QW.NodeW(e.toView).addClass(n.selectedViewClass).animate({opacity:{from:0,to:1}},this.animDur||500,t,this.animEasing);case"scroll":if(e.fromView)for(var r=0,i;i=n.views[r++];)QW.NodeH[i==e.fromView||i==e.toView?"show":"hide"](i);var s=e.toView.parentNode,a=4;while(a--){if(s.scrollWidth>1.5*s.offsetWidth)return e.fromView&&(s.scrollLeft=e.fromView.offsetLeft),QW.NodeW(s).animate({scrollLeft:{to:e.toView.offsetLeft}},this.animDur||500,t,this.animEasing);if(s.scrollHeight>1.5*s.offsetHeight)return e.fromView&&(s.scrollTop=e.fromView.offsetTop),QW.NodeW(s).animate({scrollTop:{to:e.toView.offsetTop}},this.animDur||500,t,this.animEasing);s=s.parentNode};default:e.fromView&&u(e.fromView,this.selectedViewClass),e.toView&&o(e.toView,this.selectedViewClass),t()}},switchDone:function(e){this.isSwitching=!1,this.selectedIndex=e.toIndex,this.fire("afterswitch",e)}},h.prototype]),QW.provide({TabView:e,Slide:e})}(),function(){var e=QW.ObjectH.mix,t=QW.NodeH,n=t.g,r=QW.Jss,i=QW.JssTargetH,s=i.getJss;r.addRules({".widget-slide":{tabSelector:".slide-nav li",viewSelector:".slide-content li.pic-item",pageUpSelector:".slide-pageup",pageDownSelector:".slide-pagedown",autoPlay:!0,supportMouseenter:!0,mouseenterSwitchTime:300}});var o={switchable:function(t,r){t=n(t);var i={},o="tabSelector viewSelector pageUpSelector pageDownSelector selectedClass preselectedClass selectedViewClass autoPlay autoPlayPausing autoPlayTime supportMouseenter mouseenterSwitchTime switchEvents animType animDur switchEvents onbeforeswitch onafterswitch".split(" ");for(var u=0;u<o.length;u++){var a=s(t,o[u]);a!=null&&(i[o[u]]=a)}e(i,r),t.__slide=new QW.Slide(t,i)}};QW.NodeW.pluginHelper(o,"operator"),QW.Dom&&QW.ObjectH.mix(QW.Dom,o),QW.DomU.ready(function(){QW.NodeW("div.widget-slide").switchable()})}(),Object.mix(namespace("Wenda.Timer"),function(){function e(e,t,n){var s=e||5,o="__countdown"+a+"__";r(o,1e3,function(){s==1?(i(o),n&&n()):(s--,t&&t(s))})}function t(e,t,n){u[e]=setTimeout(n,t)}function n(e){clearTimeout(u[e])}function r(e,n,i){t(e,n,function(){i(),r(e,n,i)})}function i(e){clearTimeout(u[e])}function s(){var e,t={},n,r,i,s=0,o=!1,u=function(e){return e<=9&&(e="0"+e),e};return t.localize=function(e){var t=e/1e3,n=u(parseInt(t%60,10)),r=u(parseInt(t%3600/60,10)),i=u(parseInt(t%86400/3600,10)),s=i+"\uff1a"+r+"\uff1a"+n;return s},t.go=function(){var e=new Date,n=s-e,u=0;n<=0&&(e<r?(u=1,n=r-e):(u=2,n=e-r));var a=t.localize(n);i&&i(u,a),o&&setTimeout(function(){t.go()},1e3)},t.countdownByData=function(e,n,u){i=u,s=new Date(e),r=new Date(n),o=!0,t.go()},t.stop=function(){o=!1},t}var o={},u={},a=0;return o.countdown=e,o.create=s,o.delay=t,o.undelay=n,o.loop=r,o.unloop=i,o}()),function(){function e(e,t){f={0:t.data[1],1:t.data[2],2:t.data[3]},l=e}function t(e,t){var n=[];return e&&(e.forEach(function(e,r){(e.pid==0||t==e.pid)&&n.push("<option value="+e.cid+">"+e.name+"</option>")}),W("#category-pannel select").length>0&&n.length>0&&n.unshift('<option selected="true" value="noSelect">\u4e0d\u9009</option>')),n.join("")}function n(e,t){var n,r;t&&(r='<select id="category-select'+e+'" data-leval="'+e+' "size="16" class="class-table"></select>',n=W(r).html(t),i(n),W("#"+l).appendChild(n))}function r(e,t){var n=t.target,r=n[n.selectedIndex]?n[n.selectedIndex].innerHTML:n.innerHTML;e=Number(e),n.value!="noSelect"?(c[e]=n.value,h[e]=r,c=c.slice(0,e+1),h=h.slice(0,e+1)):(c=c.slice(0,e),h=h.slice(0,e))}function i(e){e.on("change",function(e){var i=Number(W(this).getAttr("data-leval")),s=W("#"+l+" select").length-1,o=i+1,u=t(f[o],this.value);r(i,e);for(var a=i;a<s;a++){var c=a+1;W("#category-select"+c).un().removeNode()}u.length>1&&n(o,u)})}function s(){var e=f[0],r=0,i=t(e);n(r,i)}function o(){return h}function u(){return c}function a(e){s(),h=[],e.forEach(function(r,i){var s=f[i+1],o=t(s,r),u=i+1;n(u,o);try{W("#category-select"+i+' option[value="'+r+'"]').core[0].selected=!0}catch(a){}f[i].forEach(function(t){t.cid==e[i]&&h.push(t.name)})}),c=e}var f,l,c=[],h=[];return window.askCategory={initSelectsData:e,getCnBread:o,getNumBread:u,setDefaultBread:a}}();var SWFUpload;SWFUpload==undefined&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if(typeof e!="string"||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n=window.location.pathname.lastIndexOf("/");return n<=0?path="/":path=window.location.pathname.substr(0,n)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(e==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){var e=this.settings.button_window_mode;return QW.Browser.webkit&&(e="window"),['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',e,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if(typeof e=="object")for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(e[n].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;e=this.getMovieElement();if(e&&typeof e.CallFunction=="unknown"){for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(r){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler=="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler=="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler=="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler=="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler=="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler=="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler=="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler=="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler=="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler=="function").toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,n){return t==undefined?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&typeof returnValue.post=="object"&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return typeof e=="number"?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash("AddFileParam",[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){typeof e=="string"&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();n!=undefined&&(n.style.width=e+"px",n.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var n=this;if(typeof this.settings[e]=="function")this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(this.settings[e]!==null)throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;typeof e=="function"&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t=/[$]([0-9a-f]{4})/i,n={},r;if(e!=undefined){for(var i in e.post)if(e.post.hasOwnProperty(i)){r=i;var s;while((s=t.exec(r))!==null)r=r.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));n[r]=e.post[i]}e.post=n}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if(!e){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&typeof e.CallFunction=="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{typeof e[t]=="function"&&(e[t]=null)}catch(n){}}}catch(r){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent("file_dialog_complete_handler",[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if(typeof this.settings.upload_start_handler=="function")e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";t===undefined&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if(typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"){for(var r in e)e.hasOwnProperty(r)&&n.push(r+": "+e[r]);t=n.join("\n")||"",n=t.split("\n"),t="EXCEPTION: "+n.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById("SWFUpload_Console"),t||(n=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",n.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(r){alert("Exception: "+r.name+" Message: "+r.message)}},function(){function e(){this.filesDone=0,this.filesCount=0,this.filesLength=0}var t={},n={url:"",input:"",loadImg:"http://p6.qhimg.com/t01798cd1a6b1065192.gif",paramname:"imgage",maxfiles:5,uploadType:"BinaryString",maxfilesize:5242880,afterAll:function(){},onerror:function(){},uploadStarted:function(){},uploadFinished:function(){},progressUpdated:function(){}},r={MAXCOUNT:"\u4e00\u6b21\u6700\u591a\u4e0a\u4f205\u5f20\u56fe\u7247\u3002",MAXSIZE:"\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u4e0d\u8981\u8d85\u8fc75M\u3002",TYPE:"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u4e0a\u4f20JPG/PNG/GIF/BMP\u683c\u5f0f\u56fe\u7247\u3002"};e.prototype={bindElement:function(){var e=this,n;t.input.on("change",function(){n=Array.prototype.slice.call(this.files),e.checkfiles(n)})},checkfiles:function(e){var n=[],i="",s=e.length,o=t.maxfilesize;if(s<1)return;if(s>t.maxfiles)return this.onerror(r.MAXCOUNT);e.forEach(function(t,s){/image\/\w+/.test(t.type)?n.push(t):s==e.length-1?i+=t.name+r.TYPE:i+=t.name+"\uff0c"}),e=[],n.forEach(function(t,s){t.size<=o?e.push(t):s==n.length-1?i+=t.name+r.MAXSIZE:i+=t.name+"\uff0c"}),i.length>0&&this.onerror(i);if(e.length<1)return;this.upload(e)},onerror:function(e){return t.onerror(e)&&!1},upload:function(e){var t=this;t.filesLength=e.length,t.filesDone=0,QW.ArrayH.forEach(e,function(e,n){t.analyData(e)})},analyData:function(e){try{var n=this;if(t.uploadType=="BinaryString"){var r=new FormData;r.append(t.paramname,e),this.send(e,r)}if(t.uploadType=="DataURL"){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(r){var i=t.paramname+"="+this.result.split(",")[1];n.send(e,i)}}}catch(s){return this.onerror(s)}},send:function(e,n){var r=this,i=new XMLHttpRequest,s=i.upload;e.currentProgress=0,e.startData=0,e.startTime=Date.now(),e.id=+e.lastModifiedDate+parseInt(Math.random()*1e5),s.addEventListener("progress",function(t){r.progress(t,e)},!1),i.open
("POST",t.url,!0),t.uploadType=="DataURL"&&i.setRequestHeader("content-type","application/x-www-form-urlencoded"),i.send(n),t.uploadStarted(e),i.onload=function(){i.responseText&&(e.timeDiff=Date.now()-e.startTime,t.uploadFinished(JSON.parse(i.responseText),e),r.filesDone++,r.filesDone==r.filesLength&&t.afterAll())}},progress:function(e,n){if(e.lengthComputable){var r=e.loaded,i=Math.round(r*100/e.total);if(n.currentProgress!=i){n.currentProgress=i;var s=Date.now(),o=s-(n.currentStart?n.currentStart:n.startTime),u=r-n.startData;n.speed=Math.floor(u/o),n.startData=r,n.currentStart=s,t.progressUpdated(n)}}},afterAll:function(){return t.afterAll()}},QW.qUpLoad=function(r){t=Object.mix({},[n,r],!0);var i=new e;return i.bindElement(),i}}(),Object.mix(namespace("Wenda.FileUpload"),function(){function e(){if(!this.support.loading)return alert("You need the Flash Player to use SWFUpload."),!1;if(!this.support.imageResize)return alert("You need Flash Player 10 to upload resized images."),!1}function t(){p.alert("flash\u65e0\u6cd5\u52a0\u8f7d")}function n(e,t,n){try{var r="error.gif",i="";t===SWFUpload.errorCode_QUEUE_LIMIT_EXCEEDED&&(i="You have attempted to queue too many files.");if(i!==""){alert(i);return}switch(t){case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:r="zerobyte.gif";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:r="toobig.gif";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:default:}p.alert("\u60a8\u9009\u62e9\u7684\u56fe\u7247\u6587\u4ef6\u8fc7\u5927","\u8bf7\u4e0a\u4f205M\u4ee5\u5185\u7684 JPG/PNG/GIF/BMP\u683c\u5f0f\u56fe\u7247","","\u56fe\u7247\u4e0a\u4f20")}catch(s){this.debug(s)}}function r(e){try{editor.execCommand("insertHTML",'<p><img class="errorMsg_shouldbe_removed"  id="uploading_'+e.id+'" src="http://p6.qhimg.com/t01798cd1a6b1065192.gif" /></p>')}catch(t){this.debug(t)}}function i(e,t){try{e>0&&(this.startUpload(),W("#editorwraper").show())}catch(n){this.debug(n)}}function s(e){return e?editor.iframe.contentWindow.document.getElementById(e):null}function o(e){try{}catch(t){}return!0}function u(e,t){try{var n=t.evalExp();if(n.errno==0){var r=s("uploading_"+e.id);if(r){var i=new Image;i.src=n.data.url,i.onload=function(){W(r).parentNode().html('<img scrollH="'+i.height+'" src="'+n.data.url+'"/>'),editor.adjustHeight&&editor.adjustHeight(!0),setTimeout(function(){var e=editor.iframe.contentWindow.document;e.documentElement.scrollTop=e.documentElement.scrollTop+i.height,e.body.scrollTop=e.body.scrollTop+i.height},0)}}}else{var r=s("uploading_"+e.id);r&&W(r).parentNode().html('<img class="errorMsg_shouldbe_removed" src="http://p1.qhimg.com/t01383134a68d72f138.png"/>')}}catch(o){this.debug(o)}}function a(e){try{this.getStats().files_queued>0&&this.startUpload()}catch(t){this.debug(t)}}function f(e,t,n){var r="error.gif",i;try{switch(t){case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:try{}catch(o){this.debug(o)}break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:try{}catch(u){this.debug(u)};case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:r="uploadlimit.gif";break;default:}var a=s("uploading_"+e.id);W(a).parentNode().html('<img class="errorMsg_shouldbe_removed" src="http://p1.qhimg.com/t01383134a68d72f138.png"/>')}catch(f){this.debug(f)}}function l(e,t){var n={url:"/submit/uploadimg/",input:W("#upload"),loadImg:"http://p6.qhimg.com/t01798cd1a6b1065192.gif",paramname:"picdata",maxfiles:5,maxfilesize:5242880,onerror:function(e){p.alert("\u4e0a\u4f20\u5931\u8d25",e)},uploadStarted:function(e){W("#editorwraper").show(),editor.execCommand("insertHTML",'<p><img  id="'+e.id+'" src="http://p6.qhimg.com/t01798cd1a6b1065192.gif" /></p>')},uploadFinished:function(t,n){if(t.errno==0){var r=s(n.id);if(r){var i=new Image;i.src=t.data.url,i.onload=function(){W(r).parentNode().html('<img src="'+t.data.url+'"/>'),editor.adjustHeight&&editor.adjustHeight(!0),setTimeout(function(){var e=editor.iframe.contentWindow.document.body;e.scrollTop=e.scrollTop+i.height},0)}}e&&e()}},progressUpdated:function(){},afterAll:function(){}};t&&Object.mix(n,t),QW.qUpLoad(n)}function c(s,l){var c={upload_url:"/submit/uploadimg/",file_size_limit:"5 MB",file_types:"*.jpg;*.png;*.gif;*.bmp",file_types_description:"\u56fe\u7247\u6587\u4ef6",file_upload_limit:0,file_post_name:"picdata",swfupload_preload_handler:e,swfupload_load_failed_handler:t,file_queued_handler:r,file_queue_error_handler:n,file_dialog_complete_handler:i,upload_start_handler:o,upload_error_handler:f,upload_success_handler:function(e,t){u(e,t),s&&s()},upload_complete_handler:a,button_image_url:"http://p19.qhimg.com/t017df790022c9272ae.png ",button_placeholder_id:"spanButtonPlaceholder",button_width:55,button_height:20,button_text_top_padding:0,button_text_left_padding:18,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:"/resource/swf/swfupload.swf",custom_settings:{},debug:!1};l&&Object.mix(c,l),new SWFUpload(c)}var h={},p=Wenda.Panel;return h.makeHtml5=l,h.makeFlash=c,h}()),function(){var e,t=window.location.pathname;e="/resource/js/components/editor/",window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,toolbars:[[]],labelMap:{},initialContent:"\u70b9\u6b64\u8f93\u5165\u60a8\u7684\u56de\u7b54",autoClearinitialContent:!0,textarea:"content",focus:!0,minFrameHeight:100,autoHeightEnabled:!0,autoHeightMax:600,pasteplain:!0,wordCount:!0,maximumWords:15e3}}(),UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor={},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE.version="1.2.3.0";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:!!window.ActiveXObject,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera;var r=0;n.ie&&(r=parseFloat(e.match(/msie (\d+)/)[1]),n.ie9Compat=document.documentMode==9,n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=r==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=r<7||n.quirks);if(n.gecko){var i=e.match(/rv:([\d\.]+)/);i&&(i=i[1].split("."),r=i[0]*1e4+(i[1]||0)*100+(i[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(r=parseFloat(t.version())),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=!n.mobile&&(n.ie&&r>=6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1),n}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var r in t)if(!n||!e.hasOwnProperty(r))e[r]=t[r];return e},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isString:function(e){return typeof e=="string"||e.constructor==String},inherits:function(e,t){var n=e.prototype,r=utils.makeInstance(t.prototype);return utils.extend(r,n,!0),e.prototype=r,r.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var r;return function(){n&&clearTimeout(r),r=setTimeout(e,t)}},indexOf:function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},findNode:function(e,t,n){for(var r=0,i;i=e[r++];)if(n?n(i):this.indexOf(t,i.tagName.toLowerCase())!=-1)return i},removeItem:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t=0,n,r={};n=e[t++];)r[n.toUpperCase()]=r[n]=1;return r},unhtml:function(e,t){return e?e.replace(t||/[&<">]/g,function(e){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">"}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":e.cssFloat!=undefined?"cssFloat":e.styleFloat!=undefined?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){var e={};return function(t,n,r){var i=e[n.src||n.href];if(i){utils.isArray(i.funs)&&(i.ready?r():e[n.src||n.href].funs.push(r));return}e[n.src||n.href]=r?{funs:[r]}:1;if(!t.body){t.write('<script src="'+n.src+'"></script>');return}if(n.id&&t.getElementById(n.id))return;var s=t.createElement(n.tag);delete n.tag;for(var o in n)s.setAttribute(o,n[o]);s.onload=s.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){i=e[n.src||n.href];if(i.funs){i.ready=1;for(var t;t=i.funs.pop();)t()}s.onload=s.onreadystatechange=null}},t.getElementsByTagName("head")[0].appendChild(s)}}(),isEmptyObject:function(e){for(var t in e)return!1;return!0},isFunction:function(e){return"[object Function]"==Object.prototype.toString.call(e)},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(n.length>3)return"";t="#";for(var r=0,i;i=n[r++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var n=e.top,r=e.bottom,i=e.left,s=e.right,o="";if(!n||!i||!r||!s)for(var u in e)o+=";"+t+"-"+u+":"+e[u]+";";else o+=";"+t+":"+(n==r&&r==i&&i==s?n:n==r&&i==s?n+" "+i:i==s?n+" "+i+" "+r:n+" "+s+" "+r+" "+i)+";";return o}var n,r,i;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,i,s){if(s.split(" ").length==1)switch(t){case"padding":return!n&&(n={}),n[i]=s,"";case"margin":return!r&&(r={}),r[i]=s,"";case"border":return s=="initial"?"":e}return e}),e+=t(n,"padding")+t(r,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},domReady:function(){function e(){t=!0;for(var e;e=n.pop();)e()}var t=!1,n=[];return function(r){if(document.readyState==="complete")return r&&setTimeout(r,1);r&&n.push(r),t&&e(),browser.ie?(function(){if(t)return;try{document.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}e()}(),window.attachEvent("onload",e)):(document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1),window.addEventListener("load",e,!1))}}()};utils.domReady();var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)getListener(this,r,!0).push(t)},removeListener:function(e,t){e=utils.trim(e).split(" ");for(var n=0,r;r=e[n++];)utils.removeItem(getListener(this,r)||[],t)},fireEvent:function(e){e=utils.trim(e).split(" ");for(var t=0,n;n=e[t++];){var r=getListener(this,n),i,s,o;if(r){o=r.length;while(o--)s=r[o].apply(this,arguments),s!==undefined&&(i=s)}if(s=this["on"+n.toLowerCase()])i=s.apply(this,arguments)}return i}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}function t(e){var t=arguments;for(var n=1;n<t.length;n++){var r=t[n];for(var i in r)e.hasOwnProperty(i)||(e[i]=r[i])}return e}var n=e({isindex:1,fieldset:1}),r=e({input:1,button:1,select:1,textarea:1,label:1}),i=t(e({a:1}),r),s=t({iframe:1},i),o=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),u=e({ins:1,del:1,script:1,style:1}),a=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),u),f=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),a),l=t(e({p:1}),f),c=t(e({iframe:1}),f,r),h=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),p=t(e({a:0}),c),d=e({tr:1}),v=e({"#":1}),m=t(e({param:1}),h),g=t(e({form:1}),n,s,o,l),y=e({li:1}),b=e({style:1,script:1}),w=e({base:1,link:1,meta:1,title:1}),E=t(w,b),S=e({head:1,body:1}),x=e({html:1}),T=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),N=e({area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,embed:1});return e({$nonBodyContent:t(x,S,w),$block:T,$inline:p,$body:t(e({script:1,style:1}),T),$cdata:e({script:1,style:1}),$empty:N,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:S,head:E,style:v,script:v,body:g,base:{},link:{},meta:{},title:v,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:p,button:t(l,o),basefont:{},h5:p,h4:p,samp:p,h6:p,ol:y,h1:p,h3:p,option:v,h2:p,form:t(n,s,o,l),select:e({optgroup:1,option:1}),font:p,ins:p,menu:y,abbr:p,label:p,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:p,tfoot:d,cite:p,li:g,input:{},iframe:g,strong:p,textarea:v,noframes:g,big:p,small:p,span:e({"#":1,br:1}),hr:p,dt:p,sub:p,optgroup:e({option:1}),param:{},bdo:p,"var":p,div:g,object:m,sup:p,dd:g,strike:p,area:{},dir:y,map:t(e({area:1,form:1,p:1}),n,u,o),applet:m,dl:e({dt:1,dd:1}),del:p,isindex:{},fieldset:t(e({legend:1}),h),thead:d,ul:y,acronym:p,b:p,a:t(e({a:1}),c),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:p,i:p,u:p,tbody:d,s:p,address:t(s,l),tt:p,legend:p,q:p,pre:t(a,i),p:t(e({a:1}),p),em:p,dfn:p})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,r=[e],i=[t];n=e;while(n=n.parentNode){if(n===t)return 10;r.push(n)}n=t;while(n=n.parentNode){if(n===e)return 20;i.push(n)}r.reverse(),i.reverse();if(r[0]!==i[0])return 1;var s=-1;while(s++,r[s]===i[s]);e=r[s],t=i[s];while(e=e.nextSibling)if(e===t)return 4;return 2},getNodeIndex:function(e,t){var n=e,r=0;while(n=n.previousSibling){if(t&&n.nodeType==3)continue;r++}return r},inDoc:function(e,t){while(e=e.parentNode)if(e===t)return!0;return!1},findParent:function(e,t,n){if(!domUtils.isBody(e)){e=n?e:e.parentNode;while(e){if(!t||t(e)||this.isBody(e))return t&&!t(e)&&this.isBody(e)?null:e;e=e.parentNode}}return null},findParentByTagName:function(e,t,n,r){if(e&&e.nodeType&&!this.isBody(e)&&(e.nodeType==1||e.nodeType)){t=utils.listToMap(utils.isArray(t)?t:[t]),e=e.nodeType==3||!n?e.parentNode:e;while(e&&e.tagName&&e.nodeType!=9){if(r&&r(e))break;if(t[e.tagName])return e;e=e.parentNode}}return null},findParents:function(e,t,n,r){var i=t&&(n&&n(e)||!n)?[e]:[];while(e=domUtils.findParent(e,n))i.push(e);return r?i:i.reverse()},insertAfter:function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},remove:function(e,t){var n=e.parentNode,r;if(n){if(t&&e.hasChildNodes())while(r=e.firstChild)n.insertBefore(r,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,n,r){return getDomNode(e,"firstChild","nextSibling",t,n,r)},isBookmarkNode:function(e){return e.nodeType==1&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;var n=[e],r=[t],i=e,s=-1;while(i=i.parentNode){if(i===t)return i;n.push(i)}i=t;while(i=i.parentNode){if(i===e)return i;r.push(i)}n.reverse(),r.reverse();while(s++,n[s]===r[s]);return s==0?null:n[s-1]},clearEmptySibling:function(e,t,n){function r(e,t){var n;while(e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)))n=e[t],domUtils.remove(e),e=n}!t&&r(e.nextSibling,"nextSibling"),!n&&r(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var r=n.createTextNode("");return domUtils.insertAfter(e,r)}var i=e.splitText(t);if(browser.ie8){var s=n.createTextNode("");domUtils.insertAfter(i,s),domUtils.remove(s)}return i},isWhitespace:function(e){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)},getXY:function(e){var t=0,n=0;while(e.offsetParent)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={});var s=t+n.toString();n._d[s]||(n._d[s]=function(e){return n.call(e.srcElement,e||window.event)},e.attachEvent("on"+t,n._d[s]))}}e=null},un:function(e,t,n){var r=utils.isArray(t)?t:[t],i=r.length;if(i)while(i--){t=r[i];if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var s=t+n.toString();e.detachEvent("on"+t,n._d?n._d[s]:n),n._d&&n._d[s]&&delete n._d[s]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return 0;var n=e.attributes,r=t.attributes;if(!ie&&n.length!=r.length)return 0;var i,s,o=0,u=0;for(var a=0;i=n[a++];){if(i.nodeName=="style"){i.specified&&o++;if(domUtils.isSameStyle(e,t))continue;return 0}if(ie){if(!i.specified)continue;o++,s=r.getNamedItem(i.nodeName)}else s=t.attributes[i.nodeName];if(!s.specified||i.nodeValue!=s.nodeValue)return 0}if(ie){for(a=0;s=r[a++];)s.specified&&u++;if(o!=u)return 0}return 1},isSameStyle:function(e,t){var n=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),r=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){n=e.style,r=t.style;if(n.length!=r.length)return 0;for(var i in n){if(/^(\d+|csstext)$/i.test(i))continue;if(n[i]!=r[i])return 0}return 1}if(!n||!r)return n==r?1:0;n=n.split(";"),r=r.split(";");if(n.length!=r.length)return 0;for(var s=0,o;o=n[s++];)if(utils.indexOf(r,o)==-1)return 0;return 1},isBlockElm:function(e){return e.nodeType==1&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&e.nodeType==1&&e.tagName.toLowerCase()=="body"},breakParent:function(e,t){var n,r=e,i=e,s,o;do{r=r.parentNode,s?(n=r.cloneNode(!1),n.appendChild(s),s=n,n=r.cloneNode(!1),n.appendChild(o),o=n):(s=r.cloneNode(!1),o=s.cloneNode(!1));while(n=i.previousSibling)s.insertBefore(n,s.firstChild);while(n=i.nextSibling)o.appendChild(n);i=r}while(t!==r);return n=t.parentNode,n.insertBefore(s,t),n.insertBefore(o,t),n.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(e.nodeType!=1||!dtd.$removeEmpty[e.tagName])return 0;e=e.firstChild;while(e){if(domUtils.isBookmarkNode(e))return 0;if(e.nodeType==1&&!domUtils.isEmptyInlineElement(e)||e.nodeType==3&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){var n;while((n=e[t])&&n.nodeType==3&&domUtils.isWhitespace(n))e.removeChild(n)}t("firstChild"),t("lastChild")},mergChild:function(e,t,n){var r=domUtils.getElementsByTagName(e,e.tagName.toLowerCase());for(var i=0,s;s=r[i++];){if(!s.parentNode||domUtils.isBookmarkNode(s))continue;if(s.tagName.toLowerCase()=="span"){if(e===s.parentNode){domUtils.trimWhiteTextNode(e);if(e.childNodes.length==1){e.style.cssText=s.style.cssText+";"+e.style.cssText,domUtils.remove(s,!0);continue}}s.style.cssText=e.style.cssText+";"+s.style.cssText;if(n){var o=n.style;if(o){o=o.split(";");for(var u=0,a;a=o[u++];)s.style[utils.cssStyleToDomStyle(a.split(":")[0])]=a.split(":")[1]}}domUtils.isSameStyle(s,e)&&domUtils.remove(s,!0);continue}domUtils.isSameElement(e,s)&&domUtils.remove(s,!0)}if(t=="span"){var f=domUtils.getElementsByTagName(e,"a");for(var i=0,l;l=f[i++];)l.style.cssText=";"+e.style.cssText,l.style.textDecoration="underline"}},getElementsByTagName:function(e,t){var n=e.getElementsByTagName(t),r=[];for(var i=0,s;s=n[i++];)r.push(s);return r},mergToParent:function(e){var t=e.parentNode;while(t&&dtd.$removeEmpty[t.tagName]){if(t.tagName==e.tagName||t.tagName=="A"){domUtils.trimWhiteTextNode(t);if(t.tagName=="SPAN"&&!domUtils.isSameStyle(t,e)||t.tagName=="A"&&e.tagName=="SPAN"){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,t.tagName=="A"&&(t.style.textDecoration="underline")}if(t.tagName!="A"){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergSibling:function(e,t,n){function r(e,t,n){var r;if((r=n[e])&&!domUtils.isBookmarkNode(r)&&r.nodeType==1&&domUtils.isSameElement(n,r)){while(r.firstChild)t=="firstChild"?n.insertBefore(r.lastChild,n.firstChild):n.appendChild(r.firstChild);domUtils.remove(r)}}!t&&r("previousSibling","firstChild",e),!n&&r("nextSibling","lastChild",e)},unselectable:ie||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t=0,n;n=e.all[t++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){for(var n=0,r;r=t[n++];){r=attrFix[r]||r;switch(r){case"className":e[r]="";break;case"style":e.style.cssText="",!browser.ie&&e.removeAttributeNode(e.getAttributeNode("style"))}e.removeAttribute(r)}},creElm:function(e,t,n){return this.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t){var r=t[n];switch(n){case"class":e.className=r;break;case"style":e.style.cssText=e.style.cssText+";"+r;break;case"innerHTML":e[n]=r;break;case"value":e.value=r;break;default:e.setAttribute(attrFix[n]||n,r)}}return e},getComputedStyle:function(e,t){function n(e,t){return e=="font-size"&&/pt$/.test(t)&&(t=Math.round(parseFloat(t)/.75)+"px"),t}e.nodeType==3&&(e=e.parentNode);if(browser.ie&&browser.version<9&&t=="font-size"&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var r=e.ownerDocument.createElement("span");r.style.cssText="padding:0;border:0;font-family:simsun;",r.innerHTML=".",e.appendChild(r);var i=r.offsetHeight;return e.removeChild(r),r=null,i+"px"}try{var s=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(o){return null}return n(t,utils.fixColor(t,s))},removeClasses:function(e,t){t=utils.isArray(t)?t:[t],e.className=(" "+e.className+" ").replace(new RegExp("(?:\\s+(?:"+t.join("|")+"))+\\s+","g")," ")},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeStyle:function(e,t){e.style[utils.cssStyleToDomStyle(t)]="",e.style.cssText||domUtils.removeAttributes(e,["style"])},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},getStyle:function(e,t){var n=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,n)},setStyle:function(e,t,n){e.style[utils.cssStyleToDomStyle(t)]=n},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&domUtils.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t=0,n,r=e.getElementsByTagName("*");n=r[t++];)n.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,r=e.firstChild;t=t||function(){return 1};while(r)t(r)&&n++,r=r.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})==0},clearSelectedArr:function(e){var t;while(t=e.pop())domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var r=function(){var e=t.document,n=e.compatMode=="CSS1Compat";return{width:(n?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(n?e.documentElement.clientHeight:e.body.clientHeight)||0}},i=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},s=r().height,o=s*-1+n;o+=e.offsetHeight||0;var u=domUtils.getXY(e);o+=u.y;var a=i(t).y;(o>a||o<a-s)&&t.scrollTo(0,o+(o<0?-20:20))},isBr:function(e){return e.nodeType==1&&e.tagName=="BR"},isFillChar:function(e){return e.nodeType==3&&!e.nodeValue.replace(new RegExp(domUtils.fillChar),"").length},isStartInblock:function(e){var t=e.cloneRange(),n=0,r=t.startContainer,i;while(r&&domUtils.isFillChar(r))i=r,r=r.previousSibling;i&&(t.setStartBefore(i),r=t.startContainer),r.nodeType==1&&domUtils.isEmptyNode(r)&&t.startOffset==1&&t.setStart(r,0).collapse(!0);while(!t.startOffset){r=t.startContainer;if(domUtils.isBlockElm(r)||domUtils.isBody(r)){n=1;break}var s=t.startContainer.previousSibling,o;if(!s)t.setStartBefore(t.startContainer);else{while(s&&domUtils.isFillChar(s))o=s,s=s.previousSibling;o?t.setStartBefore(o):t.setStartBefore(t.startContainer)}}return n&&!domUtils.isBody(t.startContainer)?1:0},isEmptyBlock:function(e){var t=new RegExp("[ 	\r\n"+domUtils.fillChar+"]","g");if(e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1},setViewportOffset:function(e,t){var n=parseInt(e.style.left)|0,r=parseInt(e.style.top)|0,i=e.getBoundingClientRect(),s=t.left-i.left,o=t.top-i.top;s&&(e.style.left=n+s+"px"),o&&(e.style.top=r+o+"px")},fillNode:function(e,t){var n=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){while(e.firstChild)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):e.attributes.length==0},isCustomeNode:function(e){return e.nodeType==1&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return e.nodeType==1&&e.tagName.toLowerCase()==t}},fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function t(t,n,r,i){return n.nodeType==1&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(r=domUtils.getNodeIndex(n)+(t?0:1),n=n.parentNode),t?(i.startContainer=n,i.startOffset=r,i.endContainer||i.collapse(!0)):(i.endContainer=n,i.endOffset=r,i.startContainer||i.collapse(!1)),e(i),i}function n(e,t){var n=e.startContainer,r=e.endContainer,i=e.startOffset,s=e.endOffset,o=e.document,u=o.createDocumentFragment(),a,f;n.nodeType==1&&(n=n.childNodes[i]||(a=n.appendChild(o.createTextNode("")))),r.nodeType==1&&(r=r.childNodes[s]||(f=r.appendChild(o.createTextNode(""))));if(n===r&&n.nodeType==3)return u.appendChild(o.createTextNode(n.substringData(i,s-i))),t&&(n.deleteData(i,s-i),e.collapse(!0)),u;var l,c,h=u,p=domUtils.findParents(n,!0),d=domUtils.findParents(r,!0);for(var v=0;p[v]==d[v];)v++;for(var m=v,g;g=p[m];m++){l=g.nextSibling,g==n?a||(e.startContainer.nodeType==3?(h.appendChild(o.createTextNode(n.nodeValue.slice(i))),t&&n.deleteData(i,n.nodeValue.length-i)):h.appendChild(t?n:n.cloneNode(!0))):(c=g.cloneNode(!1),h.appendChild(c));while(l){if(l===r||l===d[m])break;g=l.nextSibling,h.appendChild(t?l:l.cloneNode(!0)),l=g}h=c}h=u,p[v]||(h.appendChild(p[v-1].cloneNode(!1)),h=h.firstChild);for(var m=v,y;y=d[m];m++){l=y.previousSibling,y==r?!f&&e.endContainer.nodeType==3&&(h.appendChild(o.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(c=y.cloneNode(!1),h.appendChild(c));if(m!=v||!p[v])while(l){if(l===n)break;y=l.previousSibling,h.insertBefore(t?l:l.cloneNode(!0),h.firstChild),l=y}h=c}return t&&e.setStartBefore(d[v]?p[v]?d[v]:p[v-1]:d[v-1]).collapse(!0),a&&domUtils.remove(a),f&&domUtils.remove(f),u}function r(e,t){try{if(u&&domUtils.inDoc(u,e))if(!u.nodeValue.replace(fillCharReg,"").length){var n=u.parentNode;domUtils.remove(u);while(n&&domUtils.isEmptyInlineElement(n)&&!n.contains(t))u=n.parentNode,domUtils.remove(n),n=u}else u.nodeValue=u.nodeValue.replace(fillCharReg,"")}catch(r){}}function i(e,t){var n;e=e[t];while(e&&domUtils.isFillChar(e))n=e[t],domUtils.remove(e),e=n}var s=0,o=domUtils.fillChar,u,a=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};a.prototype={cloneContents:function(){return this.collapsed?null:n(this,0)},deleteContents:function(){var e;return this.collapsed||n(this,1),browser.webkit&&(e=this.startContainer,e.nodeType==3&&!e.nodeValue.length&&(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:n(this,2)},setStart:function(e,n){return t(!0,e,n,this)},setEnd:function(e,n){return t(!1,e,n,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},cloneRange:function(){var e=this,t=new a(e.document);return t.setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){var t=this,n,r=t.collapsed;while(t.startContainer.nodeType==1&&(n=t.startContainer.childNodes[t.startOffset])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setStart(n,0);if(r)return t.collapse(!0);if(!e)while(t.endContainer.nodeType==1&&t.endOffset>0&&(n=t.endContainer.childNodes[t.endOffset-1])&&n.nodeType==1&&!domUtils.isBookmarkNode(n)&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName])t.setEnd(n,n.childNodes.length);return t},getCommonAncestor:function(e,t){var n=this.startContainer,r=this.endContainer;return n===r?e&&n.nodeType==1&&this.startOffset==this.endOffset-1?n.childNodes[this.startOffset]:t&&n.nodeType==3?n.parentNode:n:domUtils.getCommonAncestor(n,r)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,r=this.collapsed,i=this.endContainer;if(t.nodeType==3){if(n==0)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var s=domUtils.split(t,n);t===i?this.setEnd(s,this.endOffset-n):t.parentNode===i&&(this.endOffset+=1),this.setStartBefore(s)}if(r)return this.collapse(!0)}return e||(
n=this.endOffset,i=this.endContainer,i.nodeType==3&&(n==0?this.setEndBefore(i):n>=i.nodeValue.length?this.setEndAfter(i):(domUtils.split(i,n),this.setEndAfter(i)))),this},txtToElmBoundary:function(){function e(e,t){var n=e[t+"Container"],r=e[t+"Offset"];n.nodeType==3&&(r?r>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}return this.collapsed||(e(this,"start"),e(this,"end")),this},insertNode:function(e){var t=e,n=1;e.nodeType==11&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var r=this.startContainer,i=this.startOffset,s=r.childNodes[i];return s?r.insertBefore(e,s):r.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var n,r=this.document.createElement("span");return r.style.cssText="display:none;line-height:0px;",r.appendChild(this.document.createTextNode("\ufeff")),r.id="_baidu_bookmark_start_"+(t?"":s++),this.collapsed||(n=r.cloneNode(!0),n.id="_baidu_bookmark_end_"+(t?"":s++)),this.insertNode(r),n&&(this.collapse(!1).insertNode(n),this.setEndBefore(n)),this.setStartAfter(r),{start:e?r.id:r,end:n?e?n.id:n:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,n=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),n?(this.setEndBefore(n),domUtils.remove(n)):this.collapse(!0),this},enlarge:function(e,t){var n=domUtils.isBody,r,i,s=this.document.createTextNode("");if(e){i=this.startContainer,i.nodeType==1?i.childNodes[this.startOffset]?r=i=i.childNodes[this.startOffset]:(i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.previousSibling)&&!domUtils.isBlockElm(r))i=r;this.setStartBefore(i);break}r=i,i=i.parentNode}i=this.endContainer,i.nodeType==1?((r=i.childNodes[this.endOffset])?i.insertBefore(s,r):i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.nextSibling)&&!domUtils.isBlockElm(r))i=r;this.setEndAfter(i);break}r=i,i=i.parentNode}s.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(s)}if(!this.collapsed){while(this.startOffset==0){if(t&&t(this.startContainer))break;if(n(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(t&&t(this.endContainer))break;if(n(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return e.nodeType==1&&domUtils.isBlockElm(e)}).adjustmentBoundary();var r=this.createBookmark(),i=r.end,s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},o=domUtils.getNextDomNode(r.start,!1,s),u,a,f=this.cloneRange();while(o&&domUtils.getPosition(o,i)&domUtils.POSITION_PRECEDING)if(o.nodeType==3||dtd[e][o.tagName]){f.setStartBefore(o),u=o;while(u&&(u.nodeType==3||dtd[e][u.tagName])&&u!==i)a=u,u=domUtils.getNextDomNode(u,u.nodeType==1,null,function(t){return dtd[e][t.tagName]});var l=f.setEndAfter(a).extractContents(),c;if(n&&n.length>0){var h,p;p=h=n[0].cloneNode(!1);for(var d=1,v;v=n[d++];)h.appendChild(v.cloneNode(!1)),h=h.firstChild;c=h}else c=f.document.createElement(e);t&&domUtils.setAttributes(c,t),c.appendChild(l),f.insertNode(n?p:c);var m;e=="span"&&t.style&&/text\-decoration/.test(t.style)&&(m=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(m,t),domUtils.remove(c,!0),c=m):(domUtils.mergSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergChild(c,e,t),o=domUtils.getNextDomNode(c,!1,s),domUtils.mergToParent(c);if(u===i)break}else o=domUtils.getNextDomNode(o,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();var t=this.startContainer,n=this.endContainer;for(;;){if(t.nodeType==1){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if(t.tagName.toLowerCase()=="body"){t=null;break}}t=t.parentNode}for(;;){if(n.nodeType==1){if(utils.indexOf(e,n.tagName.toLowerCase())>-1)break;if(n.tagName.toLowerCase()=="body"){n=null;break}}n=n.parentNode}var r=this.createBookmark(),i,s;t&&(s=this.cloneRange().setEndBefore(r.start).setStartBefore(t),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),n&&(s=this.cloneRange().setStartAfter(r.end).setEndAfter(n),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(r.end,n.nextSibling));var o=domUtils.getNextDomNode(r.start,!1,function(e){return e.nodeType==1}),u;while(o&&o!==r.end)u=domUtils.getNextDomNode(o,!0,function(e){return e.nodeType==1}),utils.indexOf(e,o.tagName.toLowerCase())>-1&&domUtils.remove(o,!0),o=u;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(t.startContainer.nodeType==1&&t.startContainer===t.endContainer&&t.endOffset-t.startOffset==1){var n=t.startContainer.childNodes[t.startOffset];n&&n.nodeType==1&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(e=n)}}return e},select:browser.ie?function(e,t){var n;this.collapsed||this.shrinkBoundary();var s=this.getClosedNode();if(s&&!t){try{n=this.document.body.createControlRange(),n.addElement(s),n.select()}catch(a){}return this}var f=this.createBookmark(),l=f.start,c;n=this.document.body.createTextRange(),n.moveToElementText(l),n.moveStart("character",1);if(!this.collapsed){var h=this.document.body.createTextRange();c=f.end,h.moveToElementText(c),n.setEndPoint("EndToEnd",h)}else if(!e&&this.startContainer.nodeType!=3){var p=this.document.createTextNode(o),d=this.document.createElement("span");d.appendChild(this.document.createTextNode(o)),l.parentNode.insertBefore(d,l),l.parentNode.insertBefore(p,l),r(this.document,p),u=p,i(d,"previousSibling"),i(l,"nextSibling"),n.moveStart("character",-1),n.collapse(!0)}this.moveToBookmark(f),d&&domUtils.remove(d);try{n.select()}catch(a){}return this}:function(e){var t=domUtils.getWindow(this.document),n=t.getSelection(),s;browser.gecko||t.focus();if(n){n.removeAllRanges();if(this.collapsed){if(e&&browser.opera&&!domUtils.isBody(this.startContainer)&&this.startContainer.nodeType==1){var a=this.document.createTextNode("");this.insertNode(a).setStart(a,0).collapse(!0)}e||(s=this.document.createTextNode(o),this.insertNode(s),r(this.document,s),i(s,"previousSibling"),i(s,"nextSibling"),u=s,this.setStart(s,browser.webkit?1:0).collapse(!0))}var f=this.document.createRange();f.setStart(this.startContainer,this.startOffset),f.setEnd(this.endContainer,this.endOffset),n.addRange(f)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var n=this.document.createElement("span");n.innerHTML="&nbsp;";var r=this.cloneRange();return r.insertNode(n),domUtils.scrollToView(n,e,t),domUtils.remove(n),this}}})(),function(){function e(e,t){var n=domUtils.getNodeIndex;e=e.duplicate(),e.collapse(t);var r=e.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};var i=r.children,s,o=e.duplicate(),u=0,a=i.length-1,f=-1,l;while(u<=a){f=Math.floor((u+a)/2),s=i[f],o.moveToElementText(s);var c=o.compareEndPoints("StartToStart",e);if(c>0)a=f-1;else{if(!(c<0))return{container:r,offset:n(s)};u=f+1}}if(f==-1){o.moveToElementText(r),o.setEndPoint("StartToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!l)return s=i[i.length-1],{container:s,offset:s.nodeValue.length};var h=i.length;while(l>0)l-=i[--h].nodeValue.length;return{container:i[h],offset:-l}}o.collapse(c>0),o.setEndPoint(c>0?"StartToStart":"EndToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length;if(!l)return dtd.$empty[s.tagName]||dtd.$nonChild[s.tagName]?{container:r,offset:n(s)+(c>0?0:1)}:{container:s,offset:c>0?0:s.childNodes.length};while(l>0)try{var p=s;s=s[c>0?"previousSibling":"nextSibling"],l-=s.nodeValue.length}catch(d){return{container:r,offset:n(p)}}return{container:s,offset:c>0?-l:s.nodeValue.length+l}}function t(t,n){if(t.item)n.selectNode(t.item(0));else{var r=e(t,!0);n.setStart(r.container,r.offset),t.compareEndPoints("StartToEnd",t)!=0&&(r=e(t,!1),n.setEnd(r.container,r.offset))}return n}function n(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var r=t.item?t.item(0):t.parentElement();return(r.ownerDocument||r)===e.document?t:null}var r=dom.Selection=function(e){var t=this,r;t.document=e,ie&&(r=domUtils.getWindow(e).frameElement,domUtils.on(r,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),domUtils.on(r,"activate",function(){try{!n(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),r=e=null};r.prototype={getNative:function(){var e=this.document;try{return e?ie?e.selection:domUtils.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return browser.ie&&n(this)||!browser.ie&&this.getNative().rangeCount?!0:!1}catch(e){return!1}},getRange:function(){function e(e){var t=n.document.body.firstChild,r=e.collapsed;while(t&&t.firstChild)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(n.document.body,0),r&&e.collapse(!0)}var n=this;if(n._cachedRange!=null)return this._cachedRange;var r=new baidu.editor.dom.Range(n.document);if(ie){var i=n.getIERange();i?t(i,r):e(r)}else{var s=n.getNative();if(s&&s.rangeCount){var o=s.getRangeAt(0),u=s.getRangeAt(s.rangeCount-1);r.setStart(o.startContainer,o.startOffset).setEnd(u.endContainer,u.endOffset),r.collapsed&&domUtils.isBody(r.startContainer)&&!r.startOffset&&e(r)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(r)}}return this._bakRange=r},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e=ie?this.getIERange():this.getRange(),t,n,r,i;if(ie){if(!e)return this.document.body.firstChild;if(e.item)return e.item(0);t=e.duplicate(),t.text.length>0&&t.moveStart("character",1),t.collapse(1),n=t.parentElement(),i=r=e.parentElement();while(r=r.parentNode)if(r==n){n=i;break}}else{e.shrinkBoundary(),n=e.startContainer,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,e.startOffset)]);if(n.nodeType==3)return n.parentNode}return n},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie?e.createRange():e.getRangeAt(0),browser.ie?t.text:t.toString()):""}}}(),function(){function e(e){var t=e.getElementsByTagName("img"),n;for(var r=0,i;i=t[r++];)if(n=i.getAttribute("orgSrc"))i.src=n,i.removeAttribute("orgSrc");var s=e.getElementsByTagName("a");for(var r=0,o;o=s[r++];r++)o.getAttribute("data_ue_src")&&o.setAttribute("href",o.getAttribute("data_ue_src"))}function t(e,t){var n;try{t.textarea=document.getElementById("ueditor_textarea_content")}catch(r){}if(t.textarea)if(utils.isString(t.textarea)){for(var i=0,s,o=domUtils.getElementsByTagName(e,"textarea");s=o[i++];)if(s.id=="ueditor_textarea_"+t.options.textarea){n=s;break}}else n=t.textarea;n||e.appendChild(n=domUtils.creElm(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),n.value=t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0)}var n=0,r,i=UE.Editor=function(e){var t=this;t.uid=n++,EventBase.call(t),t.commands={},t.options=utils.extend(e||{},UEDITOR_CONFIG,!0),t.setOpt({isShow:!0,initialContent:"\u6b22\u8fce\u4f7f\u7528ueditor!",autoClearinitialContent:!1,iframeCssUrl:"",textarea:"editorValue",focus:!1,minFrameHeight:320,autoClearEmptyNode:!0,readonly:!1,zIndex:999,enterTag:"p",pageBreakTag:"_baidu_page_break_tag_",customDomain:!1,lang:"zh-cn",langPath:t.options.UEDITOR_HOME_URL+"lang/",allHtmlEnabled:!1});for(var r in UE.plugins)UE.plugins[r].call(t);t.langIsReady=!0,t.fireEvent("langReady"),UE.instants["ueditorInstant"+t.uid]=t};i.prototype={ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var n={};utils.isString(e)?n[e]=t:n=e,utils.extend(this.options,n,!0)},destroy:function(){var e=this;e.fireEvent("destroy"),e.container.innerHTML="",domUtils.remove(e.container);for(var t in e)e.hasOwnProperty(t)&&delete this[t]},render:function(e){var t=this,n=t.options;e.constructor===String&&(e=document.getElementById(e));if(e){var r=n.initialStyle?n.initialStyle:'body{margin:0;padding:2px 4px;font:14px/20px arial,"\u5b8b\u4f53";cursor:text}',i=ie&&browser.version<9,s=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml'"+(i?"":" class='view'")+"><head>"+(n.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(n.iframeCssUrl)+"'/>":"")+"<style type='text/css'>"+r+"p{margin:1px 0;padding:0;cursor:text;word-wrap:break-word;vertical-align:baseline \\0}"+"p img{vertical-align:bottom;*vertical-align:-3px}"+"img{border:0}"+"ol,ul{margin-top:0;margin-bottom:0;margin-left:0;padding-left:2em}"+"ol{*margin-left:2px}#initContent{color:#ccc}"+".selectTdClass{background-color:#3399FF !important;}"+"table.noBorderTable td{border:1px dashed #ddd !important}"+"table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}"+".view{padding:0;word-wrap:break-word;cursor:text;height:100%;}\n"+"</style></head><body"+(i?" class='view'":"")+"></body>";if(n.customDomain&&document.domain!=location.hostname)s+="<script>window.parent.UE.instants['ueditorInstant"+t.uid+"']._setup(document);</script></html>",e.appendChild(domUtils.creElm(document,"iframe",{id:"baidu_editor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:'javascript:void(function(){document.open();document.domain="'+document.domain+'";'+'document.write("'+s+'");document.close();}())'}));else{e.innerHTML='<iframe id="baidu_editor_'+this.uid+'"'+'width="100%" height="100%" scroll="no" frameborder="0" ></iframe>';var o=e.firstChild.contentWindow.document;!browser.webkit&&o.open(),o.write(s+"</html>"),!browser.webkit&&o.close(),t._setup(o)}e.style.overflow="hidden"}},_setup:function(e){var n=this,r=n.options;ie?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):(e.body.contentEditable=!0,e.body.spellcheck=!1),n.document=e,n.window=e.defaultView||e.parentWindow,n.iframe=n.window.frameElement,n.body=e.body,n.setHeight(r.minFrameHeight),n.selection=new dom.Selection(e);var i;browser.gecko&&(i=this.selection.getNative())&&i.removeAllRanges(),this._initEvents();if(r.initialContent)if(r.autoClearinitialContent){var s=n.execCommand;n.execCommand=function(){n.fireEvent("firstBeforeExecCommand"),s.apply(n,arguments)},this.setDefaultContent(r.initialContent)}else this.setContent(r.initialContent,!0);for(var o=this.iframe.parentNode;!domUtils.isBody(o);o=o.parentNode)if(o.tagName=="FORM"){domUtils.on(o,"submit",function(){t(this,n)});break}domUtils.isEmptyNode(n.body)&&(n.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),r.focus&&setTimeout(function(){n.focus(),!n.options.autoClearinitialContent&&n._selectionChange()}),n.container||(n.container=this.iframe.parentNode),n.isReady=1,n.fireEvent("ready"),browser.ie||domUtils.on(n.window,["blur","focus"],function(e){if(e.type=="blur"){n.options.onBlurfun&&n.options.onBlurfun(),n._bakRange=n.selection.getRange();try{n.selection.getNative().removeAllRanges()}catch(e){}}else{n.options.onFocusfun&&n.options.onFocusfun();try{n._bakRange&&n._bakRange.select()}catch(e){}}}),browser.gecko&&browser.version<=10902&&(n.body.contentEditable=!1,setTimeout(function(){n.body.contentEditable=!0},100),setInterval(function(){n.body.style.height=n.iframe.offsetHeight-20+"px"},100)),!r.isShow&&n.setHide(),r.readonly&&n.setDisabled()},sync:function(e){var n=this,r=e?document.getElementById(e):domUtils.findParent(n.iframe.parentNode,function(e){return e.tagName=="FORM"},!0);r&&t(r,n)},setHeight:function(e){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),this.document.body.style.height=e-20+"px"},getContent:function(e,t,n){var r=this;e&&utils.isFunction(e)&&(t=e,e="");if(t?!t():!this.hasContents())return"";r.fireEvent("beforegetcontent",e);var i=new RegExp(domUtils.fillChar,"g"),s=r.body.innerHTML.replace(i,"").replace(/>[\t\r\n]*?</g,"><");r.fireEvent("aftergetcontent",e);if(r.serialize){var o=r.serialize.parseHTML(s);o=r.serialize.transformOutput(o),s=r.serialize.toHTML(o)}return ie&&n?s=s.replace(/<p>\s*?<\/p>/g,"<p>&nbsp;</p>"):s=s.replace(/(&nbsp;)+/g,function(e){for(var t=0,n=[],r=e.split(";").length-1;t<r;t++)n.push(t%2==0?" ":"&nbsp;");return n.join("")}),s},getAllHtml:function(){var e=this,t={html:""},n="";return e.fireEvent("getAllHtml",t),"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+e.document.getElementsByTagName("head")[0].innerHTML+t.html+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return dtd.$block[n]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(t,n){var r=this,i=utils.extend({a:1,A:1},dtd.$inline,!0),s;t=t.replace(/^[ \t\r\n]*?</,"<").replace(/>[ \t\r\n]*?$/,">").replace(/>[\t\r\n]*?</g,"><").replace(/[\s\/]?(\w+)?>[ \t\r\n]*?<\/?(\w+)/gi,function(e,t,n){return t?s=n:t=s,!i[t]&&!i[n]?e.replace(/>[ \t\r\n]*?</,"><"):e}),r.fireEvent("beforesetcontent");var o=this.serialize;if(o){var u=o.parseHTML(t);u=o.transformInput(u),u=o.filter(u),t=o.toHTML(u)}this.body.innerHTML=t.replace(new RegExp("[\r"+domUtils.fillChar+"]*","g"),""),browser.ie&&browser.version<7&&e(this.document.body);if(r.options.enterTag=="p"){var a=this.body.firstChild,f;if(!a||a.nodeType==1&&(dtd.$cdata[a.tagName]||domUtils.isCustomeNode(a))&&a===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var l=r.document.createElement("p");while(a){while(a&&(a.nodeType==3||a.nodeType==1&&dtd.p[a.tagName]&&!dtd.$cdata[a.tagName]))f=a.nextSibling,l.appendChild(a),a=f;if(l.firstChild){if(!a){r.body.appendChild(l);break}r.body.insertBefore(l,a),l=r.document.createElement("p")}a=a.nextSibling}}}r.adjustTable&&r.adjustTable(r.body),r.fireEvent("aftersetcontent"),r.fireEvent("contentchange"),!n&&r._selectionChange(),r._bakRange=r._bakIERange=null;var c;browser.gecko&&(c=this.selection.getNative())&&c.removeAllRanges()},focus:function(e){try{var t=this,n=t.selection.getRange();e?n.setStartAtLast(t.body.lastChild).setCursor(!1,!0):n.select(!0)}catch(r){}},_initEvents:function(){var e=this,t=e.document,n=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(n,["focus","blur"],e._proxyDomEvent),domUtils.on(t,["mouseup","keydown"],function(t){if(t.type=="keydown"&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))return;if(t.button==2)return;e._selectionChange(250,t)});var r=0,i=browser.ie?e.body:e.document,s;domUtils.on(i,"dragstart",function(){r=1}),domUtils.on(i,browser.webkit?"dragover":"drop",function(){return browser.webkit?function(){clearTimeout(s),s=setTimeout(function(){if(!r){var t=e.selection,n=t.getRange();if(n){var i=n.getCommonAncestor();if(i&&e.serialize){var s=e.serialize,o=s.filter(s.transformInput(s.parseHTML(s.word(i.innerHTML))));i.innerHTML=s.toHTML(o)}}}r=0},200)}:function(e){r||(e.preventDefault?e.preventDefault():e.returnValue=!1),r=0}}())},_proxyDomEvent:function(e){return this.fireEvent(e.type.replace(/^on/,""),e)},_selectionChange:function(e,t){var n=this,i=!1,s,o;if(browser.ie&&browser.version<9&&t&&t.type=="mouseup"){var u=this.selection.getRange();u.collapsed||(i=!0,s=t.clientX,o=t.clientY)}clearTimeout(r),r=setTimeout(function(){if(!n.selection.getNative())return;var e;if(i&&n.selection.getNative().type=="None"){e=n.document.body.createTextRange();try{e.moveToPoint(s,o)}catch(r){e=null}}var u;e&&(u=n.selection.getIERange,n.selection.getIERange=function(){return e}),n.selection.cache(),u&&(n.selection.getIERange=u),n.selection._cachedRange&&n.selection._cachedStartElement&&(n.fireEvent("beforeselectionchange"),n.fireEvent("selectionchange",!!t),n.fireEvent("afterselectionchange"),n.selection.clear())},e||50)},_callCmdFn:function(e,t){var n=t[0].toLowerCase(),r,i;r=this.commands[n]||UE.commands[n],i=r&&r[e];if((!r||!i)&&e=="queryCommandState")return 0;if(i)return i.apply(this,t)},execCommand:function(e){e=e.toLowerCase();var t=this,n,r=t.commands[e]||UE.commands[e];if(!r||!r.execCommand)return;return!r.notNeedUndo&&!t.__hasEnterExecCommand?(t.__hasEnterExecCommand=!0,t.queryCommandState(e)!=-1&&(t.fireEvent("beforeexeccommand",e),n=this._callCmdFn("execCommand",arguments),t.fireEvent("afterexeccommand",e)),t.__hasEnterExecCommand=!1):n=this._callCmdFn("execCommand",arguments),t._selectionChange(),n},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t=0,n;n=e[t++];)if(this.document.getElementsByTagName(n).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;e=["div"];for(t=0;n=e[t++];){var r=domUtils.getElementsByTagName(this.document,n);for(var i=0,s;s=r[i++];)if(domUtils.isCustomeNode(s))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e=this,t;if(e.body.contentEditable=="false"){e.body.contentEditable=!0,t=e.selection.getRange();try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.fireEvent("selectionchange")}},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],t.body.contentEditable=="true"&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.queryCommandState=function(n){return utils.indexOf(e,n)!=-1?t.bkqueryCommandState.apply(t,arguments):-1},t.fireEvent("selectionchange"))},setDefaultContent:function(){function t(){var e=this;if(e.document.getElementById("initContent")){e.document.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";var n=e.selection.getRange();e.removeListener("firstBeforeExecCommand",t),e.removeListener("focus",t),setTimeout(function(){n.setStart(e.document.body.firstChild,0).collapse(!0).select(!0),e._selectionChange()})}}return function(n){var r=this;r.document.body.innerHTML='<p id="initContent">'+n+"</p>",browser.ie&&browser.version<7&&e(r.document.body),r.addListener("firstBeforeExecCommand",t),r.addListener("focus",t)}}(),setShow:function(){var e=this,t=e.selection.getRange();if(e.container.style.display=="none"){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.container.style.display=""}},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},getLang:function(e){var t=UE.I18N[this.options.lang];e=(e||"").split(".");for(var n=0,r;r=e[n++];){t=t[r];if(!t)break}return t}},utils.inherits(i,EventBase)}();var baidu=baidu||{};baidu.editor=baidu.editor||{},baidu.editor.ui={},function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,n="$EDITORUI",r=window[n]={},i="ID"+n,s=0,o=baidu.editor.ui.uiUtils={uid:function(e){return e?e[i]||(e[i]=++s):++s},hook:function(e,t){var n;return e&&e._callbacks?n=e:(n=function(){var t;e&&(t=e.apply(this,arguments));var r=n._callbacks,i=r.length;while(i--){var s=r[i].apply(this,arguments);t===undefined&&(t=s)}return t},n._callbacks=[]),n._callbacks.push(t),n},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return e.ie&&e.quirks?document.body:document.documentElement},getClientRect:function(e){var n;try{n=e.getBoundingClientRect()}catch(r){n={left:0,top:0,height:0,width:0}}var i={left:Math.round(n.left),top:Math.round(n.top),height:Math.round(n.bottom-n.top),width:Math.round(n.right-n.left)},s;while((s=e.ownerDocument)!==document&&(e=t.getWindow(s).frameElement))n=e.getBoundingClientRect(),i.left+=n.left,i.top+=n.top;return i.bottom=i.top+i.height,i.right=i.left+i.width,i},getViewportRect:function(){var e=o.getViewportElement(),t=(window.innerWidth||e.clientWidth)|0,n=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:n,width:t,bottom:n,right:t}},setViewportOffset:function(e,n){var r,i=o.getFixedLayer();e.parentNode===i?(e.style.left=n.left+"px",e.style.top=n.top+"px"):t.setViewportOffset(e,n)},getEventOffset:function(e){var t=e.target||e.srcElement,n=o.getClientRect(t),r=o.getViewportOffsetByEvent(e);return{left:r.left-n.left,top:r.top-n.top}},getViewportOffsetByEvent:function(e){var n=e.target||e.srcElement,r=t.getWindow(n).frameElement,i={left:e.clientX,top:e.clientY};if(r&&n.ownerDocument!==document){var s=o.getClientRect(r);i.left+=s.left,i.top+=s.top}return i},setGlobal:function(e,t){return r[e]=t,n+'["'+e+'"]'},unsetGlobal:function(e){delete r[e]},copyAttributes:function(t,n){var r=n.attributes,i=r.length;while(i--){var s=r[i];s.nodeName!="style"&&s.nodeName!="class"&&(!e.ie||s.specified)&&t.setAttribute(s.nodeName,s.nodeValue)}n.className&&(t.className+=" "+n.className),n.style.cssText&&(t.style.cssText+=";"+n.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):e.compareDocumentPosition(t)&16)}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.EventBase,r=baidu.editor.ui.UIBase=function(){};r.prototype={className:"",uiName:"",initOptions:function(e){var n=this;for(var r in e)n[r]=e[r];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){var n=this.renderHtml(),r=t.createElementByHtml(n),i=this.getDom();i!=null?(i.parentNode.replaceChild(r,i),t.copyAttributes(r,i)):(typeof e=="string"&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),e.appendChild(r))},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(r,n)}(),function(){function e(e){this.initOptions(e),this.initEditorUI()}var t=baidu.editor.utils,n=baidu.editor.ui.uiUtils,r=baidu.editor.ui.UIBase,i=baidu.editor.dom.domUtils;e.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this,this._dialogs={},this.initUIBase();var e=this.editor,t=this;e.addListener("ready",function(){e.options.elementPathEnabled&&(e.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+e.getLang("elementPathTip")+":</div>"),e.options.wordCount&&(e.ui.getDom("wordcount").innerHTML=e.getLang("wordCountTip"),e.ui.enableWordCount(),e.addListener("keyup",function(e,n){var r=n.keyCode||n.which;r==32&&t._wordCount()})),!e.options.elementPathEnabled&&!e.options.wordCount&&(e.ui.getDom("elementpath").style.display="none",e.ui.getDom("wordcount").style.display="none");if(!e.selection.isFocus())return;e.fireEvent("selectionchange",!1,!0)}),e.addListener("mousedown",function(e,t){var n=t.target||t.srcElement}),e.addListener("selectionchange",function(){e.options.elementPathEnabled&&t[(e.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),e.options.wordCount&&t[(e.queryCommandState("wordcount")==-1?"dis":"en")+"ableWordCount"]()})},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td></tr></table></div></div>'},_wordCount:function(){var e=this.getDom("wordcount");if(!this.editor.options.wordCount){e.style.display="none";return}e.innerHTML=this.editor.queryCommandValue("wordcount")},disableWordCount:function(){var e=this.getDom("wordcount");e.innerHTML="",e.style.display="none",this.wordcount=!1},enableWordCount:function(){var e=this.getDom("wordcount");e.style.display="",this.wordcount=!0,this._wordCount()},_updateElementPath:function(){var e=this.getDom("elementpath"),t;if(this.elementPathEnabled&&(t=this.editor.queryCommandValue("elementpath"))){var n=[];for(var r=0,i;i=t[r];r++)n[r]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+r+'&quot;);">'+i+"</span>");e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else e.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom=="1"?e.style.zoom="100%":e.style.zoom="1"}},t.inherits(e,baidu.editor.ui.UIBase),baidu.editor.ui.Editor=function(n){var r=new baidu.editor.Editor(n);r.options.editor=r;var i=r.render;return r.render=function(n){t.domReady(function(){function t(){r.setOpt({labelMap:r.options.labelMap||UE.I18N[r.options.lang].labelMap}),new e(r.options);if(n){n.constructor===String&&(n=document.getElementById(n)),n&&n.getAttribute("name")&&(r.options.textarea=n.getAttribute("name"));if(n&&/script|textarea/ig.test(n.tagName)){var t=document.createElement("div");n.parentNode.insertBefore(t,n);var s=n.value||n.innerHTML;r.options.initialContent=/^[\t\r\n ]*$/.test(s)?r.options.initialContent:s.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),n.id&&(t.id=n.id),n.className&&(t.className=n.className),n.style.cssText&&(t.style.cssText=n.style.cssText),/textarea/i.test(n.tagName)?(r.textarea=n,r.textarea.style.display="none"):n.parentNode.removeChild(n),n=t,n.innerHTML=""}}r.ui.render(n);var o=r.ui.getDom("iframeholder");r.container=r.ui.getDom(),r.container.style.zIndex=r.options.zIndex,i.call(r,o)}r.langIsReady?t():r.addListener("langReady",t)})},r}}(),UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){var n=e.selection.getStartElementPath();return utils.findNode(n,t)},n=this;for(var r in e)(function(e,r){n.commands[e]={execCommand:function(e){var i=new dom.Range(n.document),s="";if(n.currentSelectedArr&&n.currentSelectedArr.length>0){for(var o=0,u;u=n.currentSelectedArr[o++];)u.style.display!="none"&&(i.selectNodeContents(u).select(),!s&&(s=t(this,r)),(e=="superscript"||e=="subscript"
)&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]));i.selectNodeContents(n.currentSelectedArr[0]).select()}else{i=n.selection.getRange(),s=t(this,r);if(i.collapsed){if(s){var a=n.document.createTextNode("");i.insertNode(a).removeInlineStyle(r),i.setStartBefore(a),domUtils.remove(a)}else{var f=i.document.createElement(r[0]);if(e=="superscript"||e=="subscript")a=n.document.createTextNode(""),i.insertNode(a).removeInlineStyle(["sub","sup"]).setStartBefore(a).collapse(!0);i.insertNode(f).setStart(f,0)}i.collapse(!0)}else(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]);i.select()}return!0},queryCommandState:function(){return this.highlight?-1:t(this,r)?1:0}}})(r,e[r])},UE.plugins.wordcount=function(){var e=this;e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var t=e.options,n=t.maximumWords,r=t.wordCountMsg,i=t.wordOverFlowMsg;if(!t.wordCount)return;e.commands.wordcount={queryCommandValue:function(t,s){var o,u,a;return s?(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),u.length):(a=new RegExp("[\r	\n]","g"),u=this.getContentTxt().replace(a,""),o=u.length,n-o<0?(e.fireEvent("wordcountoverflow"),i):r.replace("{#leave}",n-o>=0?n-o:0).replace("{#count}",o))}}},UE.plugins.undo=function(){function e(e){var n=this;n.collapsed=e.collapsed,n.startAddr=t(e.startContainer,e.startOffset),n.endAddr=e.collapsed?n.startAddr:t(e.endContainer,e.endOffset)}function t(e,t){for(var n=0,r=[t],i,s=domUtils.findParents(e,!0,function(e){return!domUtils.isBody(e)},!0);i=s[n++];){if(n==1&&i.nodeType==3){var o=i;while(o=o.previousSibling){if(o.nodeType!=3)break;t+=o.nodeValue.replace(fillCharReg,"").length}r[0]=t}r.push(domUtils.getNodeIndex(i,!0))}return r.reverse()}function n(e,t){if(e.length!=t.length)return 0;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return 0;return 1}function r(e,t,n){i=e.document.body;for(var r=0,i,s=n.length-1;r<s;r++)i=i.childNodes[n[r]];e[t+"Container"]=i,e[t+"Offset"]=n[n.length-1]}function i(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){var e=this.getScene(),t=this.list[this.index];t.content.replace(l,"")!=e.content.replace(l,"")&&this.save();if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var e=this.list[this.index];o.document.body.innerHTML=e.bookcontent.replace(f,"");if(browser.ie)for(var t=0,n,r=o.document.getElementsByTagName("p");n=r[t++];)n.innerHTML==""&&domUtils.fillNode(o.document,n);var i=new dom.Range(o.document);try{browser.opera||browser.safari?e.senceRange.transformRange(i):i.moveToBookmark({start:"_baidu_bookmark_start_",end:"_baidu_bookmark_end_",id:!0}),browser.ie&&browser.version==9&&i.collapsed&&domUtils.isBlockElm(i.startContainer)&&domUtils.isEmptyNode(i.startContainer)&&domUtils.fillNode(i.document,i.startContainer),i.select(!browser.gecko),!browser.opera&&!browser.safari&&setTimeout(function(){i.scrollToView(o.autoHeightEnabled,o.autoHeightEnabled?domUtils.getXY(o.iframe).y:0)},200)}catch(s){}this.update();if(o.currentSelectedArr){o.currentSelectedArr=[];var u=o.document.getElementsByTagName("td");for(var t=0,a;a=u[t++];)a.className==o.options.selectedTdClass&&o.currentSelectedArr.push(a)}this.clearKey(),o.fireEvent("reset",!0)},this.getScene=function(){var t=o.selection.getRange(),n=o.body.innerHTML.replace(f,"");t.shrinkBoundary(),browser.ie&&(n=n.replace(/>&nbsp;</g,"><").replace(/\s*</g,"").replace(/>\s*/g,">"));if(browser.opera||browser.safari)return{senceRange:new e(t),content:n,bookcontent:n};var r=t.createBookmark(!0,!0),i=o.body.innerHTML.replace(f,"");return r&&t.moveToBookmark(r).select(!0),{bookcontent:i,content:n}},this.save=function(){var e=this.getScene(),t=this.list[this.index];if(t&&t.content==e.content&&(browser.opera||browser.safari?t.senceRange.compare(e.senceRange):t.bookcontent==e.bookcontent))return;this.list=this.list.slice(0,this.index+1),this.list.push(e),this.list.length>u&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=this.list[this.index+1]?!0:!1,this.hasUndo=this.list[this.index-1]||this.list.length==1?!0:!1},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){h=0,p=null,o.fireEvent("contentchange")}}function s(){this.undoManger.save()}var o=this,u=o.options.maxUndoCount||20,a=o.options.maxInputCount||20,f=new RegExp(domUtils.fillChar+"|</hr>","gi"),l=/\b(?:href|src|name)="[^"]*?"/gi;e.prototype={compare:function(e){return o.collapsed!==e.collapsed?0:!n(o.startAddr,e.startAddr)||!n(o.endAddr,e.endAddr)?0:1},transformRange:function(e){var t=this;e.collapsed=t.collapsed,r(e,"start",t.startAddr),e.collapsed?e.collapse(!0):r(e,"end",t.endAddr)}},o.undoManger=new i,o.addListener("beforeexeccommand",s),o.addListener("afterexeccommand",s),o.addListener("reset",function(e,t){t||o.undoManger.reset()}),o.commands.redo=o.commands.undo={execCommand:function(e){o.undoManger[e]()},queryCommandState:function(e){return o.undoManger["has"+(e.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c={16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},h=0,p;o.addListener("keydown",function(e,t){var n=t.keyCode||t.which;if(!c[n]&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(o.undoManger.list.length==0||(n==8||n==46)&&p!=n){o.undoManger.save(!0),p=n;return}o.undoManger.list.length==2&&o.undoManger.index==0&&h==0&&(o.undoManger.list.splice(1,1),o.undoManger.update()),p=n,h++,h>=a&&o.selection.getRange().collapsed&&o.undoManger.save()}})},UE.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,n=e.selection.getRange();n.selectNodeContents(t),domUtils.isEmptyBlock(t)&&(browser.opera&&t.firstChild&&t.firstChild.nodeType==1&&n.setStartAtFirst(t.firstChild),n.collapse(!0)),n.select(!0),this.selectAll=!0},notNeedUndo:1},e.addListener("ready",function(){domUtils.on(e.document,"click",function(t){e.selectAll=!1})})},UE.plugins.keystrokes=function(){var e=this,t=0,n=domUtils.keys,r={B:"strong",I:"em",FONT:"span"},i=[0,10,12,16,18,24,32,48],s={OL:["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman"],UL:["circle","disc","square"]};e.addListener("keydown",function(n,r){var i=r.keyCode||r.which;if(this.selectAll){this.selectAll=!1;if(i==8||i==46){e.undoManger&&e.undoManger.save(),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",(new dom.Range(e.document)).setStart(e.body.firstChild,0).setCursor(!1,!0),e.undoManger&&e.undoManger.save(),browser.ie&&e._selectionChange(),domUtils.preventDefault(r);return}}if(i==8){var o=e.selection.getRange(),u,a,f;if(o.collapsed){a=o.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);if(domUtils.isEmptyNode(a)&&a===e.body.firstChild){a.tagName!="P"&&(p=e.document.createElement("p"),e.body.insertBefore(p,a),domUtils.fillNode(e.document,p),o.setStart(p,0).setCursor(!1,!0),domUtils.remove(a)),domUtils.preventDefault(r);return}}o.collapsed&&o.startContainer.nodeType==3&&o.startContainer.nodeValue.replace(new RegExp(domUtils.fillChar,"g"),"").length==0&&o.setStartBefore(o.startContainer).collapse(!0);if(a=o.getClosedNode()){e.undoManger&&e.undoManger.save(),o.setStartBefore(a),domUtils.remove(a),o.setCursor(),e.undoManger&&e.undoManger.save(),domUtils.preventDefault(r);return}if(!browser.ie){a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a&&!f||!a&&f||a!==f){r.preventDefault();return}}e.undoManger&&(o.collapsed||(e.undoManger.save(),t=1))}if(i==9){o=e.selection.getRange(),e.undoManger&&e.undoManger.save();for(var l=0,c="",h=e.options.tabSize||4,d=e.options.tabNode||"&nbsp;";l<h;l++)c+=d;var v=e.document.createElement("span");v.innerHTML=c;if(o.collapsed){var m=domUtils.findParentByTagName(o.startContainer,"li",!0);if(m&&domUtils.isStartInblock(o)){w=o.createBookmark();var g=m.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type"));b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),g.insertBefore(y,m),y.appendChild(m),o.moveToBookmark(w).select()}else o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0)}else{a=domUtils.findParentByTagName(o.startContainer,"table",!0),f=domUtils.findParentByTagName(o.endContainer,"table",!0);if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParentByTagName(o.startContainer,["ol","ul"],!0),f=domUtils.findParentByTagName(o.endContainer,["ol","ul"],!0);if(a&&f&&a===f){var w=o.createBookmark();a=domUtils.findParentByTagName(o.startContainer,"li",!0),f=domUtils.findParentByTagName(o.endContainer,"li",!0);if(a===a.parentNode.firstChild){var E=e.document.createElement(a.parentNode.tagName);a.parentNode.parentNode.insertBefore(E,a.parentNode),E.appendChild(a.parentNode)}else{g=a.parentNode,y=e.document.createElement(g.tagName),b=utils.indexOf(s[y.tagName],domUtils.getComputedStyle(g,"list-style-type")),b=b+1==s[y.tagName].length?0:b+1,domUtils.setStyle(y,"list-style-type",s[y.tagName][b]),a.parentNode.insertBefore(y,a);var S;while(a!==f)S=a.nextSibling,y.appendChild(a),a=S;y.appendChild(f)}o.moveToBookmark(w).select()}else{if(a||f){r.preventDefault?r.preventDefault():r.returnValue=!1;return}a=domUtils.findParent(o.startContainer,T),f=domUtils.findParent(o.endContainer,T);if(a&&f&&a===f)o.deleteContents(),o.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var x=o.createBookmark(),T=function(e){return domUtils.isBlockElm(e)};o.enlarge(!0);var N=o.createBookmark(),C=domUtils.getNextDomNode(N.start,!1,T);while(C&&!(domUtils.getPosition(C,N.end)&domUtils.POSITION_FOLLOWING))C.insertBefore(v.cloneNode(!0).firstChild,C.firstChild),C=domUtils.getNextDomNode(C,!1,T);o.moveToBookmark(N).moveToBookmark(x).select()}}}e.undoManger&&e.undoManger.save(),r.preventDefault?r.preventDefault():r.returnValue=!1}if(browser.gecko&&i==46){o=e.selection.getRange();if(o.collapsed){a=o.startContainer;if(domUtils.isEmptyBlock(a)){var k=a.parentNode;while(domUtils.getChildCount(k)==1&&!domUtils.isBody(k))a=k,k=k.parentNode;a===k.lastChild&&r.preventDefault();return}}}}),e.addListener("keyup",function(s,o){var u=o.keyCode||o.which;if(!browser.gecko&&!n[u]&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){v=e.selection.getRange();if(v.collapsed){var a=v.startContainer,f=0;while(!domUtils.isBlockElm(a)){if(a.nodeType==1&&utils.indexOf(["FONT","B","I"],a.tagName)!=-1){var l=e.document.createElement(r[a.tagName]);a.tagName=="FONT"&&(l.style.cssText=(a.getAttribute("size")?"font-size:"+(i[a.getAttribute("size")]||12)+"px":"")+";"+(a.getAttribute("color")?"color:"+a.getAttribute("color"):"")+";"+(a.getAttribute("face")?"font-family:"+a.getAttribute("face"):"")+";"+a.style.cssText);while(a.firstChild)l.appendChild(a.firstChild);a.parentNode.insertBefore(l,a),domUtils.remove(a),f||v.setEnd(l,l.childNodes.length).collapse(!0),a=l,f=1}a=a.parentNode}f&&v.select()}}if(u==8){if(browser.gecko)for(var c=0,h,p=domUtils.getElementsByTagName(this.body,"li");h=p[c++];)if(domUtils.isEmptyNode(h)&&!h.previousSibling){var d=h.parentNode;domUtils.remove(h),domUtils.isEmptyNode(d)&&domUtils.remove(d)}var v,a,m,g=this.currentSelectedArr;if(g&&g.length>0){for(var c=0,y;y=g[c++];)y.innerHTML=browser.ie?browser.version<9?"&#65279":"":"<br/>";v=new dom.Range(this.document),v.setStart(g[0],0).setCursor(),t&&(e.undoManger.save(),t=0),browser.webkit&&o.preventDefault();return}v=e.selection.getRange(),a=v.startContainer,domUtils.isWhitespace(a)&&(a=a.parentNode);var b=0;while(a.nodeType==1&&domUtils.isEmptyNode(a)&&dtd.$removeEmpty[a.tagName])b=1,m=a.parentNode,domUtils.remove(a),a=m;if(b&&a.nodeType==1&&domUtils.isEmptyNode(a)){if(browser.ie){var w=v.document.createElement("span");a.appendChild(w),v.setStart(a,0).setCursor(),h=domUtils.findParentByTagName(a,"li",!0);if(h){var E=h.nextSibling;while(E){if(domUtils.isEmptyBlock(E)){h=E,E=E.nextSibling,domUtils.remove(h);continue}break}}}else a.innerHTML="<br/>",v.setStart(a,0).setCursor(!1,!0);setTimeout(function(){browser.ie&&domUtils.remove(w),t&&(e.undoManger.save(),t=0)},0)}else t&&(e.undoManger.save(),t=0)}})},UE.plugins.serialize=function(){function e(e){return/pt/.test(e)?e.replace(/([\d.]+)pt/g,function(e){return Math.round(parseFloat(e)*96/72)+"px"}):e}function t(e,t){var r=[0,10,12,16,18,24,32,48],i,s=utils.indexOf;switch(e.tag){case"script":e.tag="div",e.attributes._ue_div_script=1,e.attributes._ue_script_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"style":e.tag="div",e.attributes._ue_div_style=1,e.attributes._ue_style_data=e.children[0]?encodeURIComponent(e.children[0].data):"",e.attributes._ue_custom_node_=1,e.children=[];break;case"img":if(e.attributes.src&&/^data:/.test(e.attributes.src))return{type:"fragment",children:[]};if(e.attributes.src&&/^(?:file)/.test(e.attributes.src)){if(!/(gif|bmp|png|jpg|jpeg)$/.test(e.attributes.src))return{type:"fragment",children:[]};e.attributes.word_img=e.attributes.src,e.attributes.src=a.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";var o=parseInt(e.attributes.width)<128||parseInt(e.attributes.height)<43;e.attributes.style="background:url("+(o?a.options.UEDITOR_HOME_URL+"themes/default/images/word.gif":a.options.langPath+a.options.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd",t&&(t.flag=1)}browser.ie&&browser.version<7&&(e.attributes.orgSrc=e.attributes.src),e.attributes.data_ue_src=e.attributes.data_ue_src||e.attributes.src;break;case"li":var u=e.children[0];if(!u||u.type!="element"||u.tag!="p"&&dtd.p[u.tag]){var l={type:"element",tag:"p",attributes:{},parent:e};l.children=u?e.children:[browser.ie?{type:"text",data:domUtils.fillChar,parent:l}:{type:"element",tag:"br",attributes:{},closed:!0,children:[],parent:l}],e.children=[l]}break;case"table":case"td":n(e);break;case"a":e.attributes.anchorname&&(e.tag="img",e.attributes={"class":"anchorclass",anchorname:e.attributes.name},e.closed=1),e.attributes.href&&(e.attributes.data_ue_src=e.attributes.href);break;case"b":e.tag=e.name="strong";break;case"i":e.tag=e.name="em";break;case"u":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:underline;";break;case"s":case"del":e.tag=e.name="span",e.attributes.style=(e.attributes.style||"")+";text-decoration:line-through;",e.children.length==1&&(u=e.children[0],u.tag==e.tag&&(e.attributes.style+=";"+u.attributes.style,e.children=u.children));break;case"span":var c=e.attributes.style;c&&(!e.attributes.style||browser.webkit&&c=="white-space:nowrap;")&&delete e.attributes.style;if(browser.gecko&&browser.version<=10902&&e.parent){var h=e.parent;h.tag=="span"&&h.attributes&&h.attributes.style&&(e.attributes.style=h.attributes.style+";"+e.attributes.style)}utils.isEmptyObject(e.attributes)&&f&&(e.type="fragment");break;case"font":e.tag=e.name="span",i=e.attributes,e.attributes={style:(i.size?"font-size:"+(r[i.size]||12)+"px":"")+";"+(i.color?"color:"+i.color:"")+";"+(i.face?"font-family:"+i.face:"")+";"+(i.style||"")};while(e.parent.tag==e.tag&&e.parent.children.length==1)e.attributes.style&&(e.parent.attributes.style?e.parent.attributes.style+=";"+e.attributes.style:e.parent.attributes.style=e.attributes.style),e.parent.children=e.children,e=e.parent;break;case"p":e.attributes.align&&(e.attributes.style=(e.attributes.style||"")+";text-align:"+e.attributes.align+";",delete e.attributes.align)}return e}function n(e){if(o&&e.attributes.style){var t=e.attributes.style;e.attributes.style=t.replace(/;\s*/g,";"),e.attributes.style=e.attributes.style.replace(/^\s*|\s*$/,"")}}function r(e){switch(e.tag){case"div":e.attributes._ue_div_script&&(e.tag="script",e.children=[{type:"cdata",data:e.attributes._ue_script_data?decodeURIComponent(e.attributes._ue_script_data):"",parent:e}],delete e.attributes._ue_div_script,delete e.attributes._ue_script_data,delete e.attributes._ue_custom_node_),e.attributes._ue_div_style&&(e.tag="style",e.children=[{type:"cdata",data:e.attributes._ue_style_data?decodeURIComponent(e.attributes._ue_style_data):"",parent:e}],delete e.attributes._ue_div_style,delete e.attributes._ue_style_data,delete e.attributes._ue_custom_node_);break;case"table":!e.attributes.style&&delete e.attributes.style,o&&e.attributes.style&&n(e),e.attributes["class"]=="noBorderTable"&&delete e.attributes["class"];break;case"td":case"th":if(/display\s*:\s*none/i.test(e.attributes.style))return{type:"fragment",children:[]};if(o&&!e.children.length){var t={type:"text",data:domUtils.fillChar,parent:e};e.children[0]=t}o&&e.attributes.style&&n(e),e.attributes["class"]=="selectTdClass"&&delete e.attributes["class"];break;case"img":e.attributes.anchorname?(e.tag="a",e.attributes={name:e.attributes.anchorname,anchorname:1},e.closed=null):e.attributes.data_ue_src&&(e.attributes.src=e.attributes.data_ue_src,delete e.attributes.data_ue_src);break;case"a":e.attributes.data_ue_src&&(e.attributes.href=e.attributes.data_ue_src,delete e.attributes.data_ue_src)}return e}function i(e,t,n){if(!e.children||!e.children.length)return e;var r=e.children;for(var i=0;i<r.length;i++){var s=t(r[i],n);if(s.type=="fragment"){var o=[i,1];o.push.apply(o,s.children),r.splice.apply(r,o),r.length||(e={type:"fragment",children:[]}),i--}else r[i]=s}return e}function s(e){this.rules=e}var o=browser.ie,u=browser.version,a=this,f=a.options.autoClearEmptyNode,l=dtd.$empty,c=function(){function e(e,s){var a,f=0,l,c;t.exec("");while(a=t.exec(e)){var h=a.index;if(h>f){var p=e.slice(f,h);c?c.push(p):s.onText(p)}f=t.lastIndex;if(l=a[1]){l=l.toLowerCase(),c&&l==c._tag_name&&(s.onCDATA(c.join("")),c=null);if(!c){s.onTagClose(l);continue}}if(c){c.push(a[0]);continue}if(l=a[3]){if(/="/.test(l))continue;l=l.toLowerCase();var d=a[4],v,m={},g=d&&d.slice(-1)=="/";if(d){n.exec("");while(v=n.exec(d)){var y=v[1].toLowerCase(),b=v[2]||v[3]||v[4]||"";!b&&r[y]&&(b=y),y=="style"&&o&&u<=6&&(b=b.replace(/(?!;)\s*([\w-]+):/g,function(e,t){return t.toLowerCase()+":"})),b&&(m[y]=b.replace(/:\s*/g,":"))}}s.onTagOpen(l,m,g),!c&&i[l]&&(c=[],c._tag_name=l);continue}(l=a[2])&&s.onComment(l)}e.length>f&&s.onText(e.slice(f,e.length))}var t=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,n=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,r={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},i={script:1,style:1},s={li:{$:"ul",ul:1,ol:1},dd:{$:"dl",dl:1},dt:{$:"dl",dl:1},option:{$:"select",select:1},td:{$:"tr",tr:1},th:{$:"tr",tr:1},tr:{$:"tbody",tbody:1,thead:1,tfoot:1,table:1},tbody:{$:"table",table:1,colgroup:1},thead:{$:"table",table:1},tfoot:{$:"table",table:1},col:{$:"colgroup",colgroup:1}},a={table:"td",tbody:"td",thead:"td",tfoot:"td",tr:"td",colgroup:"col",ul:"li",ol:"li",dl:"dd",select:"option"};return function(t,n){function r(e){e.parent=f,f.children.push(e)}function i(e,t){var r=e;if(s[r.tag]){while(s[f.tag]&&s[f.tag][r.tag])f=f.parent;f.tag==r.tag&&(f=f.parent);while(s[r.tag]){if(s[r.tag][f.tag])break;r=r.parent={type:"element",tag:s[r.tag].$,attributes:{},children:[r]}}}if(n)while(dtd[r.tag]&&!(f.tag=="span"?utils.extend(dtd.strong,{a:1,A:1}):dtd[f.tag]||dtd.div)[r.tag]){if(o(f))continue;if(!f.parent)break;f=f.parent}return r.parent=f,f.children.push(r),t&&(f=e),e.attributes.style&&(e.attributes.style=e.attributes.style.toLowerCase()),e}function o(e){var t;return!e.children.length&&(t=a[e.tag])?(i({type:"element",tag:t,attributes:{},children:[]},!0),!0):!1}var u={type:"fragment",parent:null,children:[]},f=u;e(t,{onText:function(e){while(!(dtd[f.tag]||dtd.div)["#"]){if(o(f))continue;f=f.parent}r({type:"text",data:e})},onComment:function(e){r({type:"comment",data:e})},onCDATA:function(e){while(!(dtd[f.tag]||dtd.div)["#"]){if(o(f))continue;f=f.parent}r({type:"cdata",data:e})},onTagOpen:function(e,t,n){n=n||l[e],i({type:"element",tag:e,attributes:t,closed:n,children:[]},!n)},onTagClose:function(e){var t=f;while(t&&e!=t.tag)t=t.parent;if(t){for(var n=f;n!==t.parent;n=n.parent)o(n);f=t.parent}else!dtd.$removeEmpty[e]&&!dtd.$removeEmptyBlock[e]&&e!="embed"&&(t={type:"element",tag:e,attributes:{},children:[]},i(t,!0),o(t),f=t.parent)}});while(f!==u)o(f),f=f.parent;return u}}(),h=function(){function e(e){return t[e]}var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return function(t){return t+="",t?t.replace(/[<>"']/g,e):""}}(),p=function(){function t(e,t){var n=e.children,r=[];for(var i=0,s;s=n[i];i++)r.push(p(s,t));return r.join("")}function n(t){var n=[];for(var r in t){var i=t[r];r=="style"&&(i=e(i),/rgba?\s*\([^)]*\)/.test(i)&&(i=i.replace(/rgba?\s*\(([^)]*)\)/g,function(e){return utils.fixColor("color",e)})),t[r]=utils.optCss(i.replace(/windowtext/g,"#000")).replace(/white-space[^;]+;/g,"")),n.push(r+'="'+h(t[r])+'"')}return n.join(" ")}function r(e,t){return t?e.data.replace(/&nbsp;/g," "):h(e.data).replace(/ /g,"&nbsp;")}function i(e,r){if(e.type=="element"&&!e.children.length&&dtd.$removeEmpty[e.tag]&&e.tag!="a"&&utils.isEmptyObject(e.attributes)&&f)return u;var i=e.tag;if(r&&i=="td")u||(u=""),u+=t(e,r)+"&nbsp;&nbsp;&nbsp;";else{var o=n(e.attributes),u="<"+(r&&s[i]?s[i]:i)+(o?" "+o:"")+(l[i]?" />":">");l[i]||(i=="p"&&!e.children.length&&(u+=browser.ie?"&nbsp;":"<br/>"),u+=t(e,r),u+="</"+(r&&s[i]?s[i]:i)+">")}return u}var s={div:"p",li:"p",tr:"p",br:"br",p:"p"};return function(e,n){return e.type=="fragment"?t(e,n):e.type=="element"?i(e,n):e.type=="text"||e.type=="cdata"?r(e,dtd.$notTransContent[e.parent.tag]):e.type=="comment"?"<!--"+e.data+"-->":""}}(),d=function(){function t(e){var t=new RegExp(/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig);return t.test(e)}function n(e){return e=e.replace(/([\d.]+)([\w]+)?/g,function(e,t,n){return(Math.round(parseFloat(t))||1)+(n||"px")}),e}function r(t){return t=t.replace(/<!--\s*EndFragment\s*-->[\s\S]*$/,"").replace(/^(\r\n|\n|\r)|(\r\n|\n|\r)$/ig,"").replace(/^\s*(&nbsp;)+/ig,"").replace(/(&nbsp;|<br[^>]*>)+\s*$/ig,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(t){if(browser.opera)return"";try{var n=t.match(/width:([ \d.]*p[tx])/i)[1],r=t.match(/height:([ \d.]*p[tx])/i)[1],i=t.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+e(n)+'" height="'+e(r)+'" src="'+i+'" />'}catch(s){return""}}).replace(/v:\w+=["']?[^'"]+["']?/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/(lang)\s*=\s*([\'\"]?)[\w-]+\2/ig,"").replace(/<font[^>]*>\s*<\/font>/gi,"").replace(/class\s*=\s*["']?(?:(?:MsoTableGrid)|(?:MsoListParagraph)|(?:MsoNormal(Table)?))\s*["']?/gi,""),t=t.replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,t,r,i){var s=[],o=0,u=i.replace(/^\s+|\s+$/,"").replace(/&quot;/gi,"'").split(/;\s*/g);for(var o=0;o<u.length;o++){var a=u[o],f,l,c=a.split(":");if(c.length==2){f=c[0].toLowerCase(),l=c[1].toLowerCase();switch(f){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(t)||(s[o]=f.replace(/^mso-|-alt$/g,"")+":"+n(l));continue;case"horiz-align":s[o]="text-align:"+l;continue;case"vert-align":s[o]="vertical-align:"+l;continue;case"font-color":case"mso-foreground":s[o]="color:"+l;continue;case"mso-background":case"mso-highlight":s[o]="background:"+l;continue;case"mso-default-height":s[o]="min-height:"+n(l);continue;case"mso-default-width":s[o]="min-width:"+n(l);continue;case"mso-padding-between-alt":s[o]="border-collapse:separate;border-spacing:"+n(l);continue;case"text-line-through":if(l=="single"||l=="double")s[o]="text-decoration:line-through";continue;case"mso-zero-height":l=="yes"&&(s[o]="display:none");continue;case"margin":if(!/[1-9]/.test(c[1]))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(f))continue;if(/text\-indent|padding|margin/.test(f)&&/\-[\d.]+/.test(l))continue;s[o]=f+":"+c[1]}}return o>0?t+' style="'+s.join(";")+'"':t}),t=t.replace(/([ ]+)<\/span>/ig,function(e,t){return(new Array(t.length+1)).join("&nbsp;")+"</span>"}),t}return function(e){return m=null,g="",y="",b="",t(e)&&(e=r(e)),e.replace(/>[ \t\r\n]*</g,"><")}}(),v={text:"#text",comment:"#comment",cdata:"#cdata-section",fragment:"#document-fragment"},m,g="",y="",b;s.prototype={rules:null,filter:function(e,t,n){function r(e,t){e.name=e.type=="element"?e.tag:v[e.type];if(t==null)return i(e,r,e);if(o&&o[e.name])return n&&(n.flag=1),{type:"fragment",children:[]};if(s&&e.type=="element")if(t.type=="fragment"?s[e.name]:s[e.name]&&s[t.name][e.name]){var u;if(u=s[e.name].$){var a=e.attributes,f={};for(var l in u)a[l]&&(f[l]=a[l]);e.attributes=f}}else n&&(n.flag=1),e.type="fragment",e.name=t.name;return(o||s)&&i(e,r,e),e}t=t||this.rules;var s=t&&t.whiteList,o=t&&t.blackList;return r(e,null)},transformInput:function(e,n){function r(e){return e=t(e,n),e=i(e,r,e),a.options.pageBreakTag&&e.type=="text"&&e.data.replace(/\s/g,"")==a.options.pageBreakTag&&(e.type="element",e.name=e.tag="hr",delete e.data,e.attributes={"class":"pagebreak",noshade:"noshade",size:"5",unselectable:"on",style:"moz-user-select:none;-khtml-user-select: none;"},e.children=[]),e.type=="text"&&!dtd.$notTransContent[e.parent.tag]&&(e.data=e.data.replace(/[\r\t\n]*/g,"")),e}return r(e)},transformOutput:function(e){function t(e){e.tag=="hr"&&e.attributes["class"]=="pagebreak"&&(delete e.tag,e.type="text",e.data=a.options.pageBreakTag,delete e.children),e=r(e);if(e.tag=="ol"||e.tag=="ul")m=1;e=i(e,t,e);if(e.tag=="ol"||e.tag=="ul")m=0;return e}return t(e)},toHTML:p,parseHTML:c,word:d},a.serialize=new s(a.options.serialize||{}),UE.serialize=new s({})},function(){function e(e){var t=this.document;if(t.getElementById("baidu_pastebin"))return;var n=this.selection.getRange(),r=n.createBookmark(),i=t.createElement("div");i.id="baidu_pastebin",browser.webkit&&i.appendChild(t.createTextNode(domUtils.fillChar+domUtils.fillChar)),t.body.appendChild(i),r.start.style.display="",i.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(r.start).y+"px",n.selectNodeContents(i).select(!0),setTimeout(function(){if(browser.webkit)for(var s=0,o=t.querySelectorAll("#baidu_pastebin"),u;u=o[s++];){if(!domUtils.isEmptyNode(u)){i=u;break}domUtils.remove(u)}try{i.parentNode.removeChild(i)}catch(a){}n.moveToBookmark(r).select(!0),e(i)},0)}UE.plugins.paste=function(){function t(e){var t;if(e.firstChild){var o=domUtils.getElementsByTagName(e,"span");for(var u=0,a;a=o[u++];)(a.id=="_baidu_cut_start"||a.id=="_baidu_cut_end")&&domUtils.remove(a);if(browser.webkit){var f=e.querySelectorAll("div br");for(var u=0,l;l=f[u++];){var c=l.parentNode;c.tagName=="DIV"&&c.childNodes.length==1&&(c.innerHTML="<p><br/></p>",domUtils.remove(c))}var h=e.querySelectorAll("#baidu_pastebin");for(var u=0,p;p=h[u++];){var d=n.document.createElement("p");p.parentNode.insertBefore(d,p);while(p.firstChild)d.appendChild(p.firstChild);domUtils.remove(p)}var v=e.querySelectorAll("meta");for(var u=0,m;m=v[u++];)domUtils.remove(m);var f=e.querySelectorAll("br");for(u=0;m=f[u++];)/^apple-/.test(m)&&domUtils.remove(m)}if(browser.gecko){var g=e.querySelectorAll("[_moz_dirty]");for(u=0;m=g[u++];)m.removeAttribute("_moz_dirty")}if(!browser.ie){var y=e.querySelectorAll("span.apple-style-span");for(var u=0,m;m=y[u++];)domUtils.remove(m,!0)}t=e.innerHTML;var b=n.serialize;if(b)try{var w=b.transformInput(b.parseHTML(b.word(t)),r);w=b.filter(w,i?{whiteList:{p:{br:1,BR:1,$:{}},br:{$:{}},div:{br:1,BR:1,$:{}},li:{$:{}},tr:{td:1,$:{}},td:{$:{}}},blackList:{style:1,script:1,object:1}}:null,i?null:s);if(browser.webkit){var E=w.children.length,S;while((S=w.children[E-1])&&S.tag=="br")w.children.splice(E-1,1),E=w.children.length}t=b.toHTML(w,i)}catch(x){}t={html:t},n.fireEvent("beforepaste",t),n.execCommand("insertHtml",t.html,!0),n.fireEvent("afterpaste")}}var n=this,r={flag:""},i=n.options.pasteplain===!0,s={flag:""};n.commands.pasteplain={queryCommandState:function(){return i},execCommand:function(){i=!i|0},notNeedUndo:1},n.addListener("ready",function(){domUtils.on(n.body,"cut",function(){var e=n.selection.getRange();!e.collapsed&&n.undoManger&&n.undoManger.save()}),domUtils.on(n.body,browser.ie||browser.opera?"keydown":"paste",function(r){if(!(!browser.ie&&!browser.opera||!!r.ctrlKey&&r.keyCode=="86"))return;e.call(n,function(e){t(e)})})})}}(),UE.plugins.fiximgclick=function(){var e=this;browser.webkit&&e.addListener("click",function(t,n){if(n.target.tagName=="IMG"){var r=new dom.Range(e.document);r.selectNode(n.target).select()}})},UE.plugins.enterkey=function(){var e,t=this,n=t.options.enterTag;t.addListener("keyup",function(n,r){var i=r.keyCode||r.which;if(i==13){var s=t.selection.getRange(),o=s.startContainer,u;if(!browser.ie){if(/h\d/i.test(e)){if(browser.gecko){var a=domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote"],!0);a||(t.document.execCommand("formatBlock",!1,"<p>"),u=1)}else if(o.nodeType==1){var f=t.document.createTextNode(""),l;s.insertNode(f),l=domUtils.findParentByTagName(f,"div",!0);if(l){var c=t.document.createElement("p");while(l.firstChild)c.appendChild(l.firstChild);l.parentNode.insertBefore(c,l),domUtils.remove(l),s.setStartBefore(f).setCursor(),u=1}domUtils.remove(f)}t.undoManger&&u&&t.undoManger.save()}browser.opera&&s.select()}setTimeout(function(){t.selection.getRange().scrollToView(t.autoHeightEnabled,t.autoHeightEnabled?domUtils.getXY(t.iframe).y:0)},50)}}),t.addListener("keydown",function(r,i){var s=i.keyCode||i.which;if(s==13){t.undoManger&&t.undoManger.save(),e="";var o=t.selection.getRange();if(!o.collapsed){var u=o.startContainer,a=o.endContainer,f=domUtils.findParentByTagName(u,"td",!0),l=domUtils.findParentByTagName(a,"td",!0);if(f&&l&&f!==l||!f&&l||f&&!l){i.preventDefault?i.preventDefault():i.returnValue=!1;return}}t.currentSelectedArr&&domUtils.clearSelectedArr(t.currentSelectedArr);if(n=="p")browser.ie||(u=domUtils.findParentByTagName(o.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote"],!0),!u&&!browser.opera?(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(o=t.selection.getRange(),u=domUtils.findParentByTagName(o.startContainer,"p",!0),u&&domUtils.removeDirtyAttr(u))):(e=u.tagName,u.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(u)));else{i.preventDefault?i.preventDefault():i.returnValue=!1;if(!o.collapsed){o.deleteContents(),u=o.startContainer;if(u.nodeType==1&&(u=u.childNodes[o.startOffset])){while(u.nodeType==1){if(dtd.$empty[u.tagName])return o.setStartBefore(u).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!u.firstChild){var c=o.document.createElement("br");return u.appendChild(c),o.setStart(u,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}u=u.firstChild}u===o.startContainer.childNodes[o.startOffset]?(c=o.document.createElement("br"),o.insertNode(c).setCursor()):o.setStart(u,0).setCursor()}else c=o.document.createElement("br"),o.insertNode(c).setStartAfter(c).setCursor()}else{c=o.document.createElement("br"),o.insertNode(c);var h=c.parentNode;h.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),o.setStartBefore(c)):o.setStartAfter(c),o.setCursor()}}}})},UE.commands["delete"]={execCommand:function(){var e=this.selection.getRange(),t=0,n=0,r=this;if(this.selectAll){r.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).setCursor(!1,!0),r.selectAll=!1;return}if(r.currentSelectedArr&&r.currentSelectedArr.length>0){for(var i=0,s;s=r.currentSelectedArr[i++];)s.style.display!="none"&&(s.innerHTML=browser.ie?domUtils.fillChar
:"<br/>");e.setStart(r.currentSelectedArr[0],0).setCursor();return}if(e.collapsed)return;e.txtToElmBoundary();while(!e.startOffset&&!domUtils.isBody(e.startContainer)&&!dtd.$tableContent[e.startContainer.tagName])t=1,e.setStartBefore(e.startContainer);while(e.endContainer.nodeType!=3&&!domUtils.isBody(e.endContainer)&&!dtd.$tableContent[e.endContainer.tagName]){var o,u=e.endContainer,a=e.endOffset;o=u.childNodes[a];if(!o||domUtils.isBr(o)&&u.lastChild===o){e.setEndAfter(u);continue}break}if(t){var f=r.document.createElement("span");f.innerHTML="start",f.id="_baidu_cut_start",e.insertNode(f).setStartBefore(f)}if(n){var l=r.document.createElement("span");l.innerHTML="end",l.id="_baidu_cut_end",e.cloneRange().collapse(!1).insertNode(l),e.setEndAfter(l)}e.deleteContents(),domUtils.isBody(e.startContainer)&&domUtils.isEmptyBlock(r.body)?(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",e.setStart(r.body.firstChild,0).collapse(!0)):!browser.ie&&domUtils.isEmptyBlock(e.startContainer)&&(e.startContainer.innerHTML="<br/>"),e.select(!0)},queryCommandState:function(){return this.currentSelectedArr&&this.currentSelectedArr.length>0?0:this.highlight||this.selection.getRange().collapsed?-1:0}},UE.commands.inserthtml={execCommand:function(e,t,n){var r=this,i,s,o=r.currentSelectedArr;i=r.selection.getRange(),s=i.document.createElement("div"),s.style.display="inline";var u=r.serialize;if(!n&&u){var a=u.parseHTML(t);a=u.transformInput(a),a=u.filter(a),t=u.toHTML(a)}s.innerHTML=utils.trim(t);try{r.adjustTable&&r.adjustTable(s)}catch(f){}if(o&&o.length){for(var l=0,c;c=o[l++];)c.className="";o[0].innerHTML="",i.setStart(o[0],0).collapse(!0),r.currentSelectedArr=[]}if(!i.collapsed){i.deleteContents();if(i.startContainer.nodeType==1){var h=i.startContainer.childNodes[i.startOffset],p;if(h&&domUtils.isBlockElm(h)&&(p=h.previousSibling)&&domUtils.isBlockElm(p)){i.setEnd(p,p.childNodes.length).collapse();while(h.firstChild)p.appendChild(h.firstChild);domUtils.remove(h)}}}var h,d,p,v,m=0,g=s.firstChild;while(h=s.firstChild){i.insertNode(h);if(!m&&h.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(h)){d=domUtils.findParent(h,function(e){return domUtils.isBlockElm(e)});if(d&&d.tagName.toLowerCase()!="body"&&(!dtd[d.tagName][h.nodeName]||h.parentNode!==d)){if(!dtd[d.tagName][h.nodeName])p=d;else{v=h.parentNode;while(v!==d)p=v,v=v.parentNode}domUtils.breakParent(h,p||v);var p=h.previousSibling;domUtils.trimWhiteTextNode(p),p.childNodes.length||domUtils.remove(p),!browser.ie&&(y=h.nextSibling)&&domUtils.isBlockElm(y)&&y.lastChild&&!domUtils.isBr(y.lastChild)&&y.appendChild(r.document.createElement("br")),m=1}}var y=h.nextSibling;if(!s.firstChild&&y&&domUtils.isBlockElm(y)){i.setStart(y,0).collapse(!0);break}i.setEndAfter(h).collapse()}return h=i.startContainer,domUtils.isBlockElm(h)&&domUtils.isEmptyNode(h)&&(h.innerHTML=browser.ie?"":"<br/>"),i.select(!0),setTimeout(function(){i=r.selection.getRange(),i.scrollToView(r.autoHeightEnabled,r.autoHeightEnabled?domUtils.getXY(r.iframe).y:0)},200),g}},UE.plugins.autoheight=function(){function e(e){clearTimeout(u),u=setTimeout(function(){t.queryCommandState("source")!=1&&(r||(r=t.document.createElement("span"),r.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;",r.innerHTML="."),i=r.cloneNode(!0),t.body.appendChild(i),o=Math.max(domUtils.getXY(i).y+i.offsetHeight,t.options.minFrameHeight),a>0&&o>a?(t.body.style.overflowY="",t.setHeight(a),s=a,t.autoHeightEnabled=!1):(t.document.body.style.overflowY="hidden",o!=s&&(t.setHeight(o),s=o),t.autoHeightEnabled=!0),domUtils.remove(i))},50)}var t=this;t.autoHeightEnabled=t.options.autoHeightEnabled!==!1;if(!t.autoHeightEnabled)return;var n,r,i,s=0,o,u,a=t.options.autoHeightMax||0;t.adjustHeight=e,t.addListener("destroy",function(){t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e)}),t.enableAutoHeight=function(){if(!t.autoHeightEnabled)return;var r=t.document;t.autoHeightEnabled=!0,n=r.body.style.overflowY,r.body.style.overflowY="hidden",t.addListener("contentchange",e),t.addListener("keyup",e),t.addListener("mouseup",e),setTimeout(function(){e()},browser.gecko?100:0),t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.disableAutoHeight=function(){t.body.style.overflowY=n||"",t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e),t.autoHeightEnabled=!1,t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.addListener("ready",function(){t.enableAutoHeight();var n;domUtils.on(browser.ie?t.body:t.document,browser.webkit?"dragover":"drop",function(){clearTimeout(n),n=setTimeout(function(){e()},100)})})},UE.I18N["zh-cn"]={labelMap:{},insertorderedlist:{},insertunorderedlist:{},paragraph:{},fontfamily:{},customstyle:{},elementPathTip:"\u5143\u7d20\u8def\u5f84",wordCountTip:"\u5b57\u6570\u7edf\u8ba1",wordCountMsg:"\u5f53\u524d\u5df2\u8f93\u5165{#count}\u4e2a\u5b57\u7b26, \u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165{#leave}\u4e2a\u5b57\u7b26\u3002 ",wordOverFlowMsg:'<span style="color:red;">\u60a8\u5df2\u7ecf\u8d85\u8fc7\u6700\u5927\u5b57\u7b26!</span>',ok:"\u786e\u8ba4",cancel:"\u53d6\u6d88",closeDialog:"\u5173\u95ed\u5bf9\u8bdd\u6846",confirmClear:"\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6587\u6863\u4e48\uff1f",anthorMsg:"\u94fe\u63a5",clearColor:"\u6e05\u7a7a\u989c\u8272",standardColor:"\u6807\u51c6\u989c\u8272",themeColor:"\u4e3b\u9898\u989c\u8272",property:"\u5c5e\u6027","default":"\u9ed8\u8ba4",modify:"\u4fee\u6539",justifyleft:"\u5de6\u5bf9\u9f50",justifyright:"\u53f3\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justify:"\u9ed8\u8ba4",clear:"\u6e05\u9664",anchorMsg:"\u951a\u70b9","delete":"\u5220\u9664",clickToUpload:"\u70b9\u51fb\u4e0a\u4f20",unset:"\u5c1a\u672a\u8bbe\u7f6e\u8bed\u8a00\u6587\u4ef6",t_row:"\u884c",t_col:"\u5217",more:"\u66f4\u591a"},Object.mix(namespace("Wenda.Tip"),function(){function e(e,n){var i=r("wenda_tip"),s=W(e).getRect();if(Browser.ie7||Browser.ie6)i.html('<span style="red">'+n+"</span>").show(),i.css({height:"0px",opacity:0}),i.css({left:s.left+s.width/2-77+"px",top:s.top+"px"}),t(i,s.top-40,40);else{i.query(".ui-steam-tips-inner").html(n),i.css({height:"0px",opacity:0});var o=i.show().getRect();i.css({left:s.left+s.width/2-o.width/2+"px",top:s.top-o.height+"px"}),t(i,s.top-o.height-40,60)}}function t(e,t,n){e.animate({opacity:1,top:t,height:n},500,function(){e.fadeOut(500,"",QW.Easing.easeInStrong)},QW.Easing.easeInStrong)}function n(e,n,i){var s=r("helpful_tip");i=="0"?s[0].className="pop-remark-tips-no":s[0].className="pop-remark-tips-yes";var o=W(e).getRect();s.html(n),s.css({height:"0px",opacity:0});var u=s.show().getRect();s.css({left:o.left+o.width/2-u.width/2+"px",top:o.top-u.height+"px"}),t(s,o.top-u.height-20,20)}function r(e){var t=W("#"+e);if(!t.length){var n=Browser.ie7||Browser.ie6?s:o;e=="helpful_tip"&&(n=u),W(document.body).appendChild(n),t=W("#"+e)}return t}var i={},s='<div id="wenda_tip" class="inspire-tips" style="display:none;"></div>',o='<div id="wenda_tip" class="ui-steam-tips"><div class="ui-steam-tips-inner"></div><div class="caret"></div></div>',u='<div id="helpful_tip" class="pop-remark-tips-yes" style="display:none;"></div>';return i.show=e,i.showHelpful=n,i.create=r,i}()),Object.mix(namespace("Wenda.Detail.Panel"),function(){var e=Wenda.Panel,t={accept:function(t,n,r){t=t||"Ta";var i={className:"panel-02 pannel-accept-a",body:"<h3>\u60a8\u91c7\u7eb3\u4e86<b>"+t+"</b>\u7684\u56de\u7b54</h3>"+'<p>\u83b7\u5f97<span class="strong">1</span> \u7ecf\u9a8c\u503c</p>'+'<div><span class="btn btn-2"><button id="gift_btn">\u9001TA\u4e00\u4efd\u793c\u7269</button></span><a id="thanks_btn" href="javascript:;" style="color:#3fb20e">\u4e0d\uff0c\u8c22\u8c22</a></div>',header:"<h3>\u91c7\u7eb3\u6210\u529f</h3>"},s={className:"panel-02 pannel-send-gift",body:'<h3>\u4eb2\uff0c\u60a8\u7684\u80af\u5b9a\u662fTa\u7ee7\u7eed\u52aa\u529b\u7684\u6700\u5f3a\u52a8\u529b\u54e6\uff01</h3><div class="gift-list"><ul class="clearfix" id="gift_list"><li><a href="javascript:;" gifttype="1" class="pic" word="\u725b\u4ec1\uff0c\u60a8\u7684\u56de\u7b54\u771f\u662f\u592a\u68d2\u4e86\uff0c\u4f5c\u4e3a\u7c89\u4e1d\u6211\u9876\u60a8~"><img src="http://p15.qhimg.com/d/_open360/wenda/detail/acc_02.jpg"></a><p>\u9876\u725b\u4ec1</p></li><li><a href="javascript:;" gifttype="2" class="pic on" word="\u597d\u5e05\u7684\u56de\u7b54\uff0c\u697c\u4e3b\u9001\u4e0a\u9999\u543b\u4e00\u679a\uff0c\u4ee5\u8868\u8bda\u631a\u8c22\u610f\uff01"><img src="http://p18.qhimg.com/d/_open360/wenda/detail/acc_03.jpg"></a><p>\u9001\u9999\u543b</p></li><li><a href="javascript:;" gifttype="3"  class="pic" word="\u4eb2\uff0c\u611f\u8c22\u60a8\u5e2e\u4e86\u6211\u5927\u5fd9\uff0c\u4e3a\u60a8\u4e0b\u4e00\u573a\u9c9c\u82b1\u96e8\uff01"><img src="http://p17.qhimg.com/d/_open360/wenda/detail/acc_04.jpg"></a><p>\u9c9c\u82b1\u96e8</p></li></ul></div><div class="ipt" ><span style="color:#888">\u8d60\u8a00\uff1a</span><span id="gift_word">\u597d\u5e05\u7684\u56de\u7b54\uff0c\u697c\u4e3b\u9001\u4e0a\u9999\u543b\u4e00\u679a\uff0c\u4ee5\u8868\u8bda\u631a\u8c22\u610f\uff01</span></div>',header:"<h3>\u9001TA\u793c\u7269</h3>",footer:'<span class="btn btn-2"><button id="thanks_submit_btn">\u63d0\u4ea4</button></span>'},o=e.show(i,470);return W(o.oFooter).hide(),o.on("afterhide",function(){location.reload()}),W("#thanks_btn").click(function(){o.hide()}),W("#gift_btn").click(function(){W(o.oWrap).replaceClass("pannel-accept-a","pannel-send-gift"),W(o.oHeader).html(s.header),W(o.oBody).html(s.body),W(o.oFooter).show().html(s.footer),W("#gift_list").delegate(".pic","click",function(){var e=W(this);W("#gift_list").query(".pic").removeClass("on"),e.addClass("on"),W("#gift_word").html(e.attr("word"))}),W("#thanks_submit_btn").click(function(){var e=W("#gift_list").query(".on").attr("gifttype");if(!e)return Wenda.Panel.alert("\u8bf7\u9009\u62e9\u793c\u7269\uff01"),!1;Ajax.post("/submit/sendGift",{gifttype:e,ask_id:n,to_qid:r},function(e){e=e.evalExp();var t=e.errno|0,n=e.data;t==0?(Wenda.Panel.steam({msg:"\u60a8\u7684\u793c\u7269\u5df2\u7ecf\u9001\u51fa",width:250}),setTimeout(function(){o.hide()},3e3)):Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",e.errmsg)})})}),o}};return t}()),Object.mix(namespace("Wenda.Detail"),function(){function e(e,t){Ajax.get("/other/curtime",{},function(n){var n=n.evalExp();e.query('input[name="stcode"]').val(n.data.stcode),e.query('input[name="stime"]').val(n.data.stime),t&&t(e)})}function t(e,t){var n=e.query(".js-form-error");n.query(".err-cnt").html(t),t==""?n.hide():(n.show(),setTimeout(function(){n.fadeOut()},3e3))}function n(e,t){Ajax.get("/index/getTokenCode",{t:+(new Date)},function(n){e&&e.query('input[name="verify"]').val(n),t&&t(e||n)})}var r={},i=Wenda.Menu.tab({nav:W("#ask_added_nav"),menu:W("#ask_added_menu"),query:"a",evt:"click",type:"toggle",defaultIndex:!1});return i&&(i.on("show",function(e){e.nav.removeClass("btn-1-off"),e.nav.addClass("btn-1-on")}),i.on("hide",function(e){e.nav.removeClass("btn-1-on"),e.nav.addClass("btn-1-off")})),r.getCurTime=e,r.showErrorInfo=t,r.getTokenCode=n,r.askAddedTab=i,r}()),Dom.ready(function(){if(location.search.indexOf("pn")!=-1){var e=W("#answerList");if(e.length){var t=e.getXY()[1];window.scrollTo(0,t-102)}}if(W("#shenhe").length>0){Wenda.Timer.countdown(5,function(e){W("#countdowntime").html(e)},function(){location="/"});return}W(".share-container a").on("click",function(e){ShareSite.gParam({pic:"http://p6.qhimg.com/t017d5935af64559806.png"})}),function(){W("#feedback_detail").click(function(e){e.preventDefault(),Wenda.Global.Panel.userFeedBack()});var e=W("#back_top");e.click(function(e){return document.body.scrollIntoView(),e.preventDefault(),!1}),W(window).on("scroll",function(t){var n=document.documentElement.scrollTop||document.body.scrollTop;n>=100&&e.css("visibility")=="hidden"&&e.css("visibility","visible"),n<100&&e.css("visibility")=="visible"&&e.css("visibility","hidden")})}(),Browser.ie6&&Wenda.Menu.hover("#hd-crumb .ico-caret","ico-caret-on"),W(".close-error").click(function(e){e.preventDefault(),W(this).parentNode().hide()}),W("body").delegate("#btnSoso,#btnBaidu","click",function(){monitor.log({cId:"__answer_assistant_dialog_wrapper",dc:"c-helper-accept",c:"c-helper-accept",ref:""})})}),Object.mix(namespace("Wenda.Detail.Editor"),function(){function e(){return window.editor=new UE.ui.Editor({wordCount:!1,maximumWords:1e4,initialContent:s,focus:!1,onFocusfun:function(){W("#editorbox").addClass("mod-editor-focus"),Wenda.Detail.getCurTime(W("#editform"))},onBlurfun:function(){W("#editorbox").removeClass("mod-editor-focus")}}),i=window.editor,i.ready(function(){W(i.iframe.contentWindow.document).on("keydown",function(e){e.ctrlKey&&e.keyCode==13&&(W("#submit").fire("click"),e.stopPropagation(),e.preventDefault())})}),i.render("editor"),i}function t(t){e(),QW.Browser.webkit?(W(".add-img-html5").show(),W(".addimg").hide(),Wenda.FileUpload.makeHtml5(t)):Wenda.FileUpload.makeFlash(t);try{window.onbeforeunload=function(){if(W("#editform").length&&W("#editform").isVisible()){var e=new RegExp("[\r	\n]","g");if(i.hasContents()&&i.getContentTxt().replace(e,"")!=s)return"\u60a8\u5df2\u7ecf\u5bf9\u51c6\u5907\u63d0\u4ea4\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u4fee\u6539."}}}catch(n){}}function n(){var e=i.iframe.contentWindow.document;W(".errorMsg_shouldbe_removed",e).removeNode(),i.sync();var t=new RegExp("[\r	\n]","g"),n=i.getContentTxt().replace(t,"");return!n||n==s?(Wenda.Detail.showErrorInfo(W("#editform"),s),W(e.body).focus(),!1):n.length>1e4?(Wenda.Detail.showErrorInfo(W("#editform"),"\u6700\u591a\u53ef\u4ee5\u8f93\u516510000\u5b57\uff0c\u60a8\u7684\u8f93\u5165\u6587\u5b57\u5df2\u8d85\u51fa\u9650\u5236\uff01"),!1):!0}var r={},i=null,s="\u8bf7\u52a1\u5fc5\u8ba4\u771f\u56de\u7b54\uff0c\u51c6\u786e\u3001\u8be6\u5b9e\u7684\u56de\u7b54\u624d\u80fd\u771f\u6b63\u5e2e\u52a9\u5230\u7f51\u53cb\u54e6~";return r.verify=n,r.init=t,r.create=e,r}()),Dom.ready(function(){function e(e){return W(e).parentNode(".js-form")}function t(){var t=Cookie.get("light")=="true"?!0:!1;if(l)return!1;var n=e(this).query("form"),u=!1;n.attr("type")=="0"?u=s():u=i(n);if(!u)return!1;l=!0,Wenda.User.checkLogin(function(e){r(n),v(n,o)},t)}function n(e){e.query(".js-added-submit").parentNode().show(),e.query(".js-submiting").hide()}function r(e){e.query(".js-added-submit").parentNode().hide(),e.query(".js-submiting").show(),d(e,"")}function i(e){var t=e.query('textarea[name="content"]');return t.val().length<3?(d(e,"\u8bf7\u5b8c\u5584\u60a8\u7684\u5185\u5bb9,\u8be6\u7ec6\u7684\u63cf\u8ff0\u53ef\u4ee5\u83b7\u5f97\u66f4\u9ad8\u8d28\u91cf\u7684\u53cd\u9988"),t.focus().shine4Error(),!1):h.verify(e)?!0:!1}function s(){return p.verify()?h.verify(W("#editform"))?!0:!1:!1}function o(e){Ajax.post(e[0],function(t){l=!1,n(e),t=t.evalExp();var r=t.errno|0;if(r==0||r==-107){var i=e.attr("type");i=="0"?(a(t.data.user_info),m(1)):(u(e),g(i-1))}else r==-122?d(e,"\u4e0d\u80fd\u56de\u7b54\u81ea\u5df1\u63d0\u7684\u95ee\u9898\uff01"):r==-123?d(e,"\u60a8\u5df2\u7ecf\u56de\u7b54\u8fc7\u8fd9\u4e2a\u95ee\u9898\u4e86\uff01"):r==-125?d(e,"\u60a8\u7684\u56de\u7b54\u4e0e\u522b\u4eba\u7684\u56de\u7b54\u592a\u76f8\u4f3c\u4e86\uff0c\u8bf7\u5b8c\u5584\u540e\u91cd\u65b0\u63d0\u4ea4\uff01"):r==-11?d(e,"\u4fe1\u606f\u5df2\u8fc7\u671f\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\uff01"):r==-1?QHPass.login(!1):r==-110?h.need(e,!0):d(e,t.errmsg);r!=-110&&h.check(e)})}function u(e){var t=e.query('textarea[name="content"]'),n=t.val().stripTags(),r=e.parentNode(".js-form"),i=e.attr("type"),s={1:"\u8865\u5145",2:"\u8ffd\u95ee",3:"\u8865\u5145"},o='<div class="q"><span class="{$cn}">{$d}</span>{$c}</div>',u=i=="3"?"ico-a":"ico-q";n=o.tmpl({cn:u,d:s[i],c:n}),r.query(".js-added-btn").click(),r.query(".js-added-area").show().appendChild(W(n)),t.val(""),i==2&&Wenda.Panel.steam({msg:"\u8ffd\u95ee\u6210\u529f\uff01\u8d85\u8fc73\u6b21\u8ffd\u95ee\u5c06\u8017\u8d39\u4e00\u5b9a\u79ef\u5206\u5662~",width:400})}function a(e){var t=e.coin_frequency_info;W("#crumb_box").hide(),W("#bd").hide(),W("#answer_succ_box").show();var n="";t&&t.coin_add_ans?(n='\u56de\u7b54\u6210\u529f\uff0c\u5df2\u83b7\u5f97 <span style="color:#F60;">\u7ecf\u9a8c\u503c+'+t.score_add_ans+"\uff0c\u79ef\u5206+"+t.coin_add_ans+"</span>",t.coin_continuity_ans&&(n=n+'\uff1b<span style="color:#F60;">\u6301\u7eed\u56de\u7b54\u79ef\u5206+'+t.coin_continuity_ans+"</span>")):n="\u56de\u7b54\u6210\u529f\uff0c\u611f\u8c22\u60a8\u5bf9\u95ee\u7b54\u7684\u8d21\u732e";var r="/q/"+/\d+/.exec(window.location.pathname)[0];W("#succ_text").html(n),W("#succ_url").attr("href",r),f(),W("#succ_change_btn").click(f)}function f(){var e=W("#succ_qlist_box"),t=W("#succ_qlist"),n=Wenda.Info.askCid;Ajax.post("/other/moreAsk",{cid:n},function(n){n=n.evalExp();var r=n.errno|0,i=n.data;if(r==0){var s="",o='<li>{$coins}<span class="s0"><a title="{$title}" target="_blank" href="/q/{$ask_id}">{$title}</a></span><span class="s1">{$answer_cnt}\u56de\u7b54</span></li>';for(var u=0,a=i.length;u<a;u++){var f=i[u],l=parseInt(f.coins,10);l>0?l='<span class="wealth">'+l+"</span>":l="",f.coins=l,s+=o.tmpl(f)}s==""?e.hide():(e.show(),t.html(s))}else e.hide()})}var l=!1,c=Wenda.Panel,h=Wenda.Captcha,p=Wenda.Detail.Editor,d=Wenda.Detail.showErrorInfo,v=Wenda.Detail.getTokenCode,m=Wenda.Log.register("editform",["answer-uploadImg","answer-submit-success","answer-name","answer-agree","answer-submit"]),g=Wenda.Log.register("js-detail",["added-ask-success","added-trace-success","added-answer-success","added-ask-submit","added-answer-submit","added-trace-submit"]);W("#editform").length&&p.init(function(){m(0)}),W("body").delegate(".pop-dia-close","mousedown",function(){l=!1});var y=W("#js-detail");y.delegate(".js-added-btn","click",function(t){var n=W(this),r=e(n).query(".js-added-form");r.toggle(),r.query("form").attr("type")=="3"&&n.toggleClass("btn-1-on","btn-1-off")}),y.delegate(".textarea","focus",function(e){var t=W(this).parentNode("form");t.attr("type")=="3"&&Wenda.Detail.getCurTime(t)}),h.on("keyenter",function(t){e(t).query(".js-added-submit").click()}),W(".js-added-submit").click(t)}),Dom.ready(function(){function e(){var e=r.menu.query('[name="addCoin"]:checked'),s=parseInt(e.val(),10),o=Wenda.Info.askId;Ajax.post("/submit/addCoins",{coin:s,ask_id:o},function(r){r=r.evalExp();if(r.errno==0){var o=e.parent(".js-form").query(".ask-author"),u=o.previousSibling(".wealth");u.length?u.html(s+parseInt(u.html(),10)):o.insertAdjacentHTML("beforebegin",'<span class="wealth">'+s+'</span><span class="line">|</span>'),i.html(parseInt(i.html(),10)-s),Wenda.Panel.steam(),n.hide(2),e.attr("checked",""),t()}else Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",r.errmsg)})}function t(){var e=parseInt(i.html(),10);if(e<5){var t='<div class="hd" style="zoom:1;"><p>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u53ea\u6709 <span class="wealth" id="add_coin_num">'+e+"</span> \u79ef\u5206\uff0c\u4e0d\u8db3\u4ee5\u8ffd\u52a0\u60ac\u8d4f\u3002</p>"+"</div>"+'<div class="bd">'+'<span style="color: #999;">\u5feb\u52aa\u529b\u56de\u7b54\u95ee\u9898\uff0c\u83b7\u5f97\u66f4\u591a\u79ef\u5206\u3002<a style="color:#2E8F02;" href="/c" target="_blank">\u6211\u8981\u56de\u7b54&raquo;</a></span>'+"</div>";return r.menu.html(t),!1}var n=r.menu.query('[name="addCoin"]');n.forEach(function(t){t=W(t),e<parseInt(t.val(),10)?t.attr("disabled","disabled").nextSibling("label").css("color","#c8c8c8"):t.attr("disabled","").nextSibling("label").css("color","#666")})}var n=Wenda.Detail.askAddedTab;if(!n)return!1;var r=n.getItem(2),i=W("#add_coin_num"),s=W("#add_coin_btn"),o=s.parent();s.length&&(s.click(e),t())}),Dom.ready(function(){var e=Wenda.Detail.getTokenCode;W("#js-detail").delegate(".js-btn-set-best","click",function(t){t.preventDefault();var n=W(this).parentNode(".js-form"),r=Wenda.Info.askId,i=n.attr("ans_id"),s=n.attr("qid"),o=n.query(".ask-author").html();e(null,function(e){Ajax.post("/submit/chosebest/",{verify:e,ask_id:r,ans_id:i},function(e){e=e.evalExp();var t=e.errno|0;t==0?Wenda.Detail.Panel.accept(o,r,s):t==-1?QHPass.login(!1):t==-145?Wenda.Panel.alert("\u63d0\u95ee\u540e3\u5c0f\u65f6\u624d\u80fd\u9009\u6ee1\u610f\u56de\u7b54"):Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",e.errmsg)})})})}),Dom.ready(function(){W("#js-detail").delegate(".js-ask-expert","click",function(e){e.preventDefault();var t=Wenda.Info.askId,n=W(this).attr("data-qid");Ajax.post("/submit/seekHelp",{ask_id:t,qid:n},function(e){e=e.evalExp();var t=e.errno|0;if(t==0){var n=Wenda.Detail.askAddedTab,r=n.getItem(3);Wenda.Panel.steam(),n.hide(3)}else Wenda.Panel.alert("\u64cd\u4f5c\u5931\u8d25\uff01",e.errmsg)})})}),Dom.ready(function(){W(".mod-remarks a").hover(function(e){var t=W(this),n=t.attr("data-op"),r=t.parentNode().attr("data-clicked"),i=n=="1"?"\u6709\u5e2e\u52a9":"\u65e0\u5e2e\u52a9";r&&(i="\u5df2\u8bc4\u4ef7",t.parentNode().query("a,span").css({cursor:"default"})),t.query("span").html(i)},function(){var e=W(this);e.query("span").html(e.attr("data-num"))}),W(".mod-remarks a").on("click",function(e){var t=W(this),n=t.attr("data-op");if(t.parentNode().attr("data-clicked")=="1")return!1;var r=t.parentNode().attr("data-ans_id"),i=Wenda.Info.askId;Ajax.post("/submit/useful",{ask_id:i,ans_id:r,op:n},function(e){var e=e.evalExp(),r=t.query("span").html();if(e.errno==0){var i=parseInt(t.attr("data-num"),10)+1;t.attr("data-num",i),t.parentNode().attr("data-clicked","1"),Wenda.Tip.showHelpful(t,"+1\u611f\u8c22\u60a8\u7684\u8bc4\u4ef7",n),Wenda.Log.send("mod-remarks","useful-"+n)}else Wenda.Tip.showHelpful(t,e.errmsg,n);isNaN(r)||t.query("span").html(t.attr("data-num"))})})}),Dom.ready(function(){var e=Wenda.Info.askId;W(".js-form").hover(function(){W(this).query(".js-report").css("visibility","visible"),W(this).query(".ui-line").css("visibility","visible")},function(){W(this).query(".js-report").css("visibility","hidden"),W(this).query(".ui-line").css("visibility","hidden")}),W(".js-report,.js-report2").click(function(){var t=W(this).parentNode(".js-form").attr("ans_id");Wenda.Global.Panel.report(e,t)})}),Dom.ready(function(){if(location.href.indexOf("gifttype")!=-1){var e=location.href.queryUrl(),t={1:{url:"http://p15.qhimg.com/d/_open360/wenda/detail/acc_02.jpg",word:"\u725b\u4ec1\uff0c\u60a8\u7684\u56de\u7b54\u771f\u662f\u592a\u68d2\u4e86\uff0c\u4f5c\u4e3a\u7c89\u4e1d\u6211\u9876\u60a8~",name:"\u9876\u725b\u4ec1"},2:{url:"http://p17.qhimg.com/d/_open360/wenda/detail/acc_03.jpg",word:"\u597d\u5e05\u7684\u56de\u7b54\uff0c\u697c\u4e3b\u9001\u4e0a\u9999\u543b\u4e00\u679a\uff0c\u4ee5\u8868\u8bda\u631a\u8c22\u610f\uff01",name:"\u9001\u9999\u543b"},3:{url:"http://p17.qhimg.com/d/_open360/wenda/detail/acc_04.jpg",word:"\u4eb2\uff0c\u611f\u8c22\u60a8\u5e2e\u4e86\u6211\u5927\u5fd9\uff0c\u4e3a\u60a8\u4e0b\u4e00\u573a\u9c9c\u82b1\u96e8\uff01",name:"\u9c9c\u82b1\u96e8"}},n=t[e.gifttype],r=e.giftdate||"";if(!n)return!1;var i=W(".js-form[ask_id]").query(".ask-author").outerHTML(),s='<div class="mod-gift-card clearfix"><div class="gift-pic"><img src="'+n.url+'">'+"</div>"+'<div class="gift-info">'+'<p class="r0">'+i+" \u9001\u7ed9\u60a8\u793c\u7269 "+n.name+" </p>"+"<p>\u8d60\u8a00\uff1a"+n.word+"</p>"+"<p>\u65f6\u95f4\uff1a"+r.encode4HtmlValue()+"</p>"+"</div>"+"</div>";W("#gift_box").html(s)}}),Dom.ready(function(){var e=W(".js-sh-ipt").val().trim()||W("#js-ask-title").val();e&&e.length>30&&(e=e.slice(0,30)+". . ."),W("#ask-relate tr,#ask-relate li").length>0?W(".js-more-rel").html('<a text="more-rel" href="/search/?q='+encodeURIComponent(e)+'" target="_blank">\u66f4\u591a\u5173\u4e8e \u201c'+e+"\u201d \u7684\u76f8\u5173\u77e5\u8bc6\u00bb</a>"):(W(".js-more-rel").html(""),W("#js-rel-list").addClass("no-rel-ask")),Ajax.get("/engine/getRelateQuery",{title:e,t:+(new Date)},function(e){var t=e.evalExp().data,n=t.length,r=[];if(n>0){n>8&&(n=8);for(var i=0;i<n;i++)r.push('<li><a href="/search/?q='+encodeURIComponent(t[i])+'" target="_blank">'+t[i].subByte(20,"...")+"</a></li>");W("#js-rel-list").show(),W(".js-list-item").html(r.join(" ")),W(".js-sh-ipt").val()?Wenda.Log.send("js-rel-list","rel-show-byquery"):Wenda.Log.send("js-rel-list","rel-show-bytitle")}else W("#js-rel-list").html("").hide()})}),Dom.ready(function(){function e(){W(".js-jishi").show().query(".js-jishi-btn").click(function(e){var t=W(this),n=t.attr("data-jishi-from");window.open("http://web.jishi.360.cn/?from=wenda&title="+encodeURIComponent(W("#js-ask-title").val())+"&type="+n),e.preventDefault()})}var t=Wenda.Log;W(".js-jishi").length&&(e(),W(".doctor-1v1").length>0&&t.send("js-static-bestanswer","bestanswer-quickreslove-page"),W("#js-statistics-onereslove").length>0&&t.send("js-jishi","jishi-onereslove-page"))});